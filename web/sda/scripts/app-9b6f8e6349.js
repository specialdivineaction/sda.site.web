!function(){"use strict";function e(e){function n(e,t,n){return new o(e,r.url,t,n)}n.$inject=["panelContentMediatorRegistry","$http","$q"];var o=t(e),r={url:"/api/vwise",$get:n};return r}function t(e){function t(t,n,o,r){e.WorkspaceRepository.call(this,t),this.$http=o,this.$q=r,this.url=n,this.workspaces=new e.Cache,this.panels=new e.Cache}return t.prototype=Object.create(e.WorkspaceRepository.prototype),t.prototype.createWorkspace=function(t){var n=e.UUID.uuid4(),o=new e.Workspace(n,this);t&&(o.title=t),this.workspaces[o.id]=o;var r=this.url+"/workspaces",i=this.marshallWorkspace(o),a=this.$http.post(r,i).then(function(){return o});return this.workspaces.fetch(o.id,a),a},t.prototype.saveWorkspace=function(t){if(!(t instanceof e.Workspace))throw new TypeError("expected instance of Workspace");var n=this.url+"/workspaces/"+t.id,o=this.marshallWorkspace(t),r=this.$http.put(n,o).then(function(){return t});return r},t.prototype.getWorkspace=function(e){var t=this;return this.workspaces.fetch(e,function(){var n=t.url+"/workspaces/"+e,o=t.$http.get(n).then(function(e){return t.unmarshallWorkspace(e.data)});return o.catch(function(){t.workspaces.clear(e)}),o})},t.prototype.createPanel=function(t,n){var o=e.UUID.uuid4(),r=this,i=new e.Panel(o,t,n,function(e){r.savePanel(e)});this.panels[n.id+":"+i.id]=i;var a=this.url+"/workspaces/"+n.id+"/panels",l=this.marshallPanel(i),s=this.$http.post(a,l).then(function(){return i});return this.panels.fetch(i.id,s),s},t.prototype.savePanel=function(t){if(!(t instanceof e.Panel))throw new TypeError("expected instance of Panel");var n=this.url+"/workspaces/"+t.workspace.id+"/panels/"+t.id,o=this.marshallPanel(t);return this.$http.put(n,o).then(function(){return t})},t.prototype.getPanel=function(e,t){var n=e+":"+t,o=this;return this.panels.fetch(n,function(){var r=o.url+"/workspaces/"+e+"/panels/"+t,i=o.$http.get(r).then(function(e){return o.unmarshallPanel(e.data)});return i.catch(function(){o.panels.clear(n)}),i})},t}e.$inject=["vwise"]}(),function(){"use strict";angular.module("sdaVwise",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcBiblio","trcBio","trcReln","ngDragDrop","pouchdb","cfp.hotkeys","sda","sdaSite"])}(),function(){"use strict";function e(e){function n(e,t,n,i){var a=i(r.db);return new o(e,a,n)}n.$inject=["panelContentMediatorRegistry","$http","$q","pouchDB"];var o=t(e),r={db:{name:"vwise"},$get:n};return r}function t(e){function t(t,n,o){e.WorkspaceRepository.call(this,t),this.$q=o,this.db=n,this.workspaces=new e.Cache,this.panels=new e.Cache}return t.prototype=Object.create(e.WorkspaceRepository.prototype),t.prototype.listWorkspaceIds=function(){return this.db.allDocs({include_docs:!0}).then(function(e){return e.rows.filter(function(e){return e.doc&&"workspace"===e.doc.type}).map(function(e){return e.id})})},t.prototype.createWorkspace=function(t){var n=e.UUID.uuid4(),o=new e.Workspace(n,this);return t&&(o.title=t),this.saveWorkspace(o)},t.prototype.saveWorkspace=function(t){if(!(t instanceof e.Workspace))throw new TypeError("expected instance of Workspace");var n={_id:t._id||t.id,_rev:t._rev,type:"workspace",workspace:this.marshallWorkspace(t)};return this.db.put(n).then(function(e){if(!e.ok)throw new Error("unable to save workspace");return t._id=e.id,t._rev=e.rev,t})},t.prototype.getWorkspace=function(e){if(!e)return this.$q.reject(new Error("no id provided"));var t=this;return this.workspaces.fetch(e,function(){return t.db.get(e).then(function(e){return t.unmarshallWorkspace(e.workspace).then(function(t){return t._id=e._id,t._rev=e._rev,t})})})},t.prototype.removeWorkspace=function(e){return this.db.remove(e)},t.prototype.createPanel=function(t,n,o,r){var i=e.UUID.uuid4(),a=this,l=new e.Panel(i,t,n,o,r,function(e){a.savePanel(e)});return this.savePanel(l)},t.prototype.savePanel=function(t){if(!(t instanceof e.Panel))throw new TypeError("expected instance of Panel");var n={_id:t._id||t.id,_rev:t._rev,type:"panel",panel:this.marshallPanel(t)};return this.db.put(n).then(function(e){if(!e.ok)throw new Error("unable to save panel");return t._id=e.id,t._rev=e.rev,t})},t.prototype.getPanel=function(e,t){if(!e)return this.$q.reject(new Error("no id provided"));var n=this;return this.panels.fetch(e,function(){return n.db.get(e).then(function(e){return n.unmarshallPanel(e.panel,t).then(function(t){return t._id=e._id,t._rev=e._rev,t})})})},t.prototype.removePanel=function(e,t){return t&&t.removePanel(e),this.db.remove(e)},t}e.$inject=["vwise"],angular.module("sdaVwise").provider("workspaceRepository",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/vwise/components/workspace/workspace.html",scope:{workspace:"="},controller:t,controllerAs:"vm"};return e}function t(e,t){function n(n,o){var r=o.draggable.scope(),i=r.item;if(i){var a=angular.element(n.target).offset(),l={xPosition:o.position.left-a.left,yPosition:o.position.top-a.top,width:600,height:400,background:"#ffffff"},s=t.findContentMediators(i,l),d=s.length>0?s[0]:null;if(d){var c=d.initPanelData(i,l);c.then(function(t){return e.workspace.createPanel(d,t,l)})}}}function o(n,o){var r={note:""},i={xPosition:n,yPosition:o},a=t.findContentMediators(r,i),l=a.length>0?a[0]:null;e.workspace.createPanel(l,r,i)}function r(e){if(e.ctrlKey){var t=angular.element(e.target).offset();o(e.clientX-t.left,e.clientY-t.top)}}var i=this;i.thingDropped=n,i.workspaceClicked=r}t.$inject=["$scope","panelContentMediatorRegistry"],angular.module("sdaVwise").directive("vwiseWorkspace",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){function i(){function e(){"expand_less"===i.icon?(o.width=t.vprops.width,o.height=t.vprops.height,t.vprops.width=r.outerWidth()+1,t.vprops.height=r.outerHeight(),i.label="expand",i.icon="expand_more"):(t.vprops.width=o.width,t.vprops.height=o.height,i.label="collapse",i.icon="expand_less")}var o={width:t.vprops.width,height:t.vprops.height},r=n.find(".panel-label"),i={label:"collapse",icon:"expand_less",handler:e};return i}r.addActionButton(i()),t.title=e.getTitle(t.work.titles),t.work.editions.forEach(function(e){e.type="edition",e.workId=t.work.id})}var n={restrict:"E",require:"^^vwisePanel",templateUrl:"app/vwise/components/work-panel/work-panel.html",scope:{work:"=",relationships:"=",vprops:"="},link:t};return n}e.$inject=["worksRepo"],angular.module("sdaVwise").directive("workPanel",e)}(),function(){"use strict";function e(e){function t(t){t.title=e.getTitle(t.volume.titles),t.edition=e.getEdition(t.workId,t.editionId)}var n={restrict:"E",templateUrl:"app/vwise/components/work-panel/volume-panel.html",scope:{volume:"=",workId:"@",editionId:"@"},link:t};return n}e.$inject=["worksRepo"],angular.module("sdaVwise").directive("volumePanel",e)}(),function(){"use strict";function e(e){function t(t){t.title=e.getTitle(t.edition.titles),t.edition.volumes.forEach(function(e){e.type="volume",e.workId=t.workId,e.editionId=t.edition.id})}var n={restrict:"E",templateUrl:"app/vwise/components/work-panel/edition-panel.html",scope:{edition:"=",workId:"@"},link:t};return n}e.$inject=["worksRepo"],angular.module("sdaVwise").directive("editionPanel",e)}(),function(){"use strict";function e(e){function n(n,o,r,i){function a(){function e(){"expand_less"===i.icon?(t.width=n.vprops.width,t.height=n.vprops.height,n.vprops.width=r.outerWidth()+10,n.vprops.height=r.outerHeight(),i.label="expand",i.icon="expand_more"):(n.vprops.width=t.width,n.vprops.height=t.height,i.label="collapse",i.icon="expand_less")}var t={width:n.vprops.width,height:n.vprops.height},r=o.find(".panel-label"),i={label:"collapse",icon:"expand_less",handler:e};return i}i.addActionButton(a());var l=n.person.name;n.name=l.label||e.at(l,t).map(function(e){return e.trim()}).filter(e.identity).join(" ")}function o(t,n,o,r,i){function a(){var e=t.person.id,n=l(e);n.then(function(e){c.works=e});var o=n.then(function(e){return s(e)});o.then(function(e){c.relatedPeople=e})}function l(e){var t=o.searchByAuthor(e);return t.$promise.then(function(){return t.items.forEach(function(e){e.type="work"}),t.items})}function s(t){var o=t.map(function(e){return d(e.id)}),i=n.all(o).then(function(t){return e.chain(t).flatten().groupBy(function(e){return e.type.identifier+"-"+(e.reverse?"rev":"fwd")}).map(function(t){var n=e.clone(t[0]);return n.relationships=e.flatMap(t,"relationships"),n}).value()}),a=i.then(function(t){var o=t.map(function(t){var o=e.chain(t.relationships).flatMap("entities").map("entity").map(function(t){return t.$promise.then(function(t){var n=e.map(t.authors,"authorId");return n})}).value(),i=n.all(o).then(function(t){return e.chain(t).flatten().filter().uniq().value()});return t.relationships=i.then(function(e){var t=e.map(function(e){var t=r.get(e);return t.$promise.then(function(){t.type="person"}),t.$promise});return n.all(t)}),n.all(t)});return n.all(o)});return a}function d(e){var t="works/"+e,n=i.search(t),r=n.$promise.then(function(e){var n=i.normalizeRelationships(e,t,o);return n.$promise});return r}var c=this;c.works=[],a()}o.$inject=["$scope","$q","worksRepo","peopleRepo","relnRepo"];var r={restrict:"E",require:"^^vwisePanel",templateUrl:"app/vwise/components/person-panel/person-panel.html",scope:{person:"=",vprops:"="},link:n,controller:o,controllerAs:"panel"};return r}e.$inject=["_"],angular.module("sdaVwise").directive("personPanel",e);var t=["title","givenName","middleName","familyName","suffix"]}(),function(){"use strict";function e(e,t,n,o){function r(){t.PanelContentMediator.call(this,"works","Works Content Mediator")}function i(e){var t=n.getWork(e);return t.$promise}function a(e){var t=o.search(e);return t.$promise.then(function(){var n=o.normalizeRelationships(t,e);return n.$promise.then(function(){return n.forEach(function(e){e.relationships.forEach(function(e){e.anchors.forEach(function(e){e.properties.hasOwnProperty("editionId")&&e.properties.hasOwnProperty("volumeId")?(e.type="volume",e.workId=e.ref.id,e.editionId=e.properties.editionId,e.id=e.properties.volumeId):e.properties.hasOwnProperty("editionId")?(e.type="edition",e.workId=e.ref.id,e.id=e.properties.editionId):(e.type="work",e.id=e.ref.id)})})}),n})})}return r.prototype=Object.create(t.PanelContentMediator.prototype),r.prototype.matches=function(e){return e.type&&"work"===e.type&&e.id},r.prototype.initPanelData=function(t){var n=i(t.id);return e.all({id:t.id,work:n,relationships:n.then(function(e){return a(e.ref.token)})})},r.prototype.unmarshall=function(t){var n=i(t.id);return e.all({id:t.id,work:n,relationships:n.then(function(e){return a(e.ref.token)})})},r.prototype.marshall=function(e){var t={type:"work",id:e.id};return t},r.prototype.getTemplate=function(){return'<work-panel work="content.work" relationships="content.relationships" vprops="vprops" flex layout="column"></work-panel>'},new r}e.$inject=["$q","vwise","worksRepo","relnRepo"],angular.module("sdaVwise").factory("worksContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"volumes","Volumes Content Mediator")}function o(e,n,o){var r=t.getVolume(e,n,o);return r.$promise.then(function(){return r.workId=e,r.editionId=n,r})}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"volume"===e.type&&e.id&&e.workId&&e.editionId},n.prototype.initPanelData=function(e){return o(e.workId,e.editionId,e.id)},n.prototype.unmarshall=function(e){return o(e.workId,e.editionId,e.id)},n.prototype.marshall=function(e){var t={type:"volume",id:e.id,workId:e.workId,editionId:e.editionId};return t},n.prototype.getTemplate=function(){return'<volume-panel volume="content" edition-id="{{content.editionId}}" work-id="{{content.workId}}" flex layout="column"></volume-panel>'},new n}e.$inject=["vwise","worksRepo"],angular.module("sdaVwise").factory("volumesContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"people","People Content Mediator")}function o(e){var n=t.get(e);return n.$promise}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"person"===e.type&&e.id},n.prototype.initPanelData=function(e){return o(e.id)},n.prototype.unmarshall=function(e){return o(e.id)},n.prototype.marshall=function(e){var t={type:"person",id:e.id};return t},n.prototype.getTemplate=function(){return'<person-panel person="content" vprops="vprops" flex layout="column"></person-panel>'},new n}e.$inject=["vwise","peopleRepo"],angular.module("sdaVwise").factory("peopleContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"passthru","Pass-Through Debug Mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(){return!0},new t}e.$inject=["vwise"],angular.module("sdaVwise").factory("passthruContentMediator",e)}(),function(){"use strict";function e(e){return new e.PanelContentMediatorRegistry}e.$inject=["vwise"],angular.module("sdaVwise").factory("panelContentMediatorRegistry",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"notes","Note Content Mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.hasOwnProperty("note")},t.prototype.getTemplate=function(){return'<div ng-model="content.note" contenteditable flex></div>'},new t}e.$inject=["vwise"],angular.module("sdaVwise").factory("noteContentMediator",e)}(),function(){"use strict";function e(e,t){function n(){e.PanelContentMediator.call(this,"editions","Editions Content Mediator")}function o(e,n){var o=t.getEdition(e,n);return o.$promise.then(function(){return o.workId=e,o})}return n.prototype=Object.create(e.PanelContentMediator.prototype),n.prototype.matches=function(e){return e.type&&"edition"===e.type&&e.id&&e.workId},n.prototype.initPanelData=function(e){return o(e.workId,e.id)},n.prototype.unmarshall=function(e){return o(e.workId,e.id)},n.prototype.marshall=function(e){var t={type:"edition",id:e.id,workId:e.workId};return t},n.prototype.getTemplate=function(){return'<edition-panel edition="content" work-id="{{content.workId}}" flex layout="column"></edition-panel>'},new n}e.$inject=["vwise","worksRepo"],angular.module("sdaVwise").factory("editionsContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"ia-reader","Internet Archive Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"internetarchive"===e.type},t.prototype.getTemplate=function(){return'<ia-reader book-id="content.properties.id" page="content.properties.seq" flex></ia-reader>'},new t}e.$inject=["vwise"],angular.module("sdaVwise").factory("internetArchiveContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"ht-reader","HathiTrust Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"hathitrust"===e.type},t.prototype.getTemplate=function(){return'<hathitrust-reader book-id="content.properties.htid" page="content.properties.seq" flex></hathitrust-reader>'},new t}e.$inject=["vwise"],angular.module("sdaVwise").factory("hathitrustContentMediator",e)}(),function(){"use strict";function e(e){function t(){e.PanelContentMediator.call(this,"gb-reader","Google Books Digital Copy mediator")}return t.prototype=Object.create(e.PanelContentMediator.prototype),t.prototype.matches=function(e){return e.type&&"googlebooks"===e.type},t.prototype.getTemplate=function(){return'<google-book-reader book-id="content.properties.id" page="content.properties.page" flex></google-book-reader>'},new t}e.$inject=["vwise"],angular.module("sdaVwise").factory("googleBooksContentMediator",e)}(),function(){"use strict";function e(e){function r(t,r,i,a){var l=a[1];l.getInfoArea=function(){return r.find(".panel-area-left")},l.getStatusArea=function(){return r.find(".panel-area-bottom")};var s=l.panel;t.vp=s.vprops;var d=t.$new(!0);d.content=s.content,d.vprops=s.vprops,d.$watch("vprops.background",function(e){var t=n(e);s.vprops.foreground=o(t)}),d.$watch("content",function(){s.save()},!0);var c=s.contentMediator.getTemplate(),u=r.find(".content");u.html(c),e(u.contents())(d)}var i={restrict:"E",require:["^^vwiseWorkspace","vwisePanel"],templateUrl:"app/vwise/components/panel/panel.html",replace:!0,scope:{panel:"="},link:r,controller:t,controllerAs:"vm"};return i}function t(e){function t(e){return c.actionButtons.push(e),function(){var t=c.actionButtons.indexOf(e);t>=0&&c.actionButtons.splice(t,1)}}function n(e){return c.propertyButtons.push(e),function(){var t=c.propertyButtons.indexOf(e);t>=0&&c.propertyButtons.splice(t,1)}}function o(){c.panel.remove()}function r(e,t){c.panel.vprops.xPosition=t.position.left,c.panel.vprops.yPosition=Math.max(0,t.position.top)}function i(e,t){var n=Math.max(0,t.position.top);c.panel.setPosition(t.position.left,n),d()}function a(){c.resizing=!0}function l(t,n){var o=n.position.left,r=n.position.top;e.$apply(function(){c.panel.vprops.width=Math.max(0,o),c.panel.vprops.height=Math.max(0,r)})}function s(t,n){c.resizing=!1;var o=n.position.left,r=n.position.top;e.$apply(function(){c.panel.setSize(Math.max(0,o),Math.max(0,r))})}function d(e){c.panel.activate(),e&&e.stopPropagation&&e.stopPropagation()}var c=this;c.resizing=!1,c.actionButtons=[],c.propertyButtons=[],c.panel=e.panel,c.addActionButton=t,c.addPropertyButton=n,c.closePanel=o,c.startResize=a,c.resizePanel=l,c.stopResize=s,c.movePanel=r,c.stopMove=i,c.activatePanel=d}function n(e){var t=e.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if(t)return{r:parseInt(t[1],16)/255,g:parseInt(t[2],16)/255,b:parseInt(t[3],16)/255}}function o(e){var t=e.r<=.03928?e.r/12.92:Math.pow((e.r+.055)/1.055,2.4),n=e.g<=.03928?e.g/12.92:Math.pow((e.g+.055)/1.055,2.4),o=e.b<=.03928?e.b/12.92:Math.pow((e.b+.055)/1.055,2.4),r=.2126*t+.7152*n+.0722*o;return r>.215?"rgba(0,0,0,0.87)":"rgba(255,255,255,0.87)"}e.$inject=["$compile"],t.$inject=["$scope"],angular.module("sdaVwise").directive("vwisePanel",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){r&&(r.$render=function(){n.html(e.getTrustedHtml(r.$viewValue||""))},n.on("blur keyup change",function(){t.$apply(function(){r.$setViewValue(n.html())})}))}var n={restrict:"A",require:"?ngModel",link:t};return n}e.$inject=["$sce"],angular.module("sdaVwise").directive("contenteditable",e)}(),function(){"use strict";angular.module("sdaReader",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","duScroll","trcArticles","trcRefs","sda"])}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/themes/components/tree-categorization/tree-categorization.html",scope:{scopeId:"@",scheme:"@",activeRefId:"<"},controller:t,controllerAs:"vm"};return e}function t(e,t){function n(e,t){if(e.entryRef&&e.entryRef.id===t)return e.expanded=!0,!0;if(0===e.children.length)return!1;var o=e.children.some(function(e){return n(e,t)});return o&&(e.expanded=!0),o}var o=this;o.categories=t.get(e.scopeId,e.scheme),o.categories.$promise.then(function(){o.categories.root.children.forEach(function(e){e.expanded=!0}),e.$watch("activeRefId",function(e){e&&n(o.categories.root,e)})})}t.$inject=["$scope","categorizationRepo"],angular.module("sdaReader").directive("treeCategorization",e)}(),function(){"use strict";function e(){function e(e,n,o){function r(e){return new i(e)}function i(e){function t(t){return l.get({scopeId:e,key:t})}function n(e,t,n,o){}function o(e){}function r(e,t){}function i(e){}function a(t,n,o){var r={scopeId:e,schemeId:t.schemeId,nodeId:t.id},i={label:n,description:o},a=d.save(r,i);return a.$promise.then(function(e){t.childIds.push(e.id),t.children.push(e)}),a}function u(t,n,o){var r=s.delete({scopeId:e,schemeId:t.schemeId,nodeId:t.id,remove_refs:!!n});return o&&r.$promise.then(function(){var e=o.children.indexOf(t);e>=0&&o.children.splice(e,1)}),r.$promise}function p(){}function m(){}function h(t,n){var o={scopeId:e,schemeId:t.schemeId,nodeId:t.id},r=c.update(o,n);return r.$promise.then(function(e){t.entryRef=e}),r}function f(){var t={scopeId:e,schemeId:node.schemeId,nodeId:node.id},n=c.delete(t);return n.$promise.then(function(){node.entryRef=null}),n}this.get=t,this.create=n,this.remove=o,this.nodes={get:r,getChildren:i,create:a,move:p,remove:u,update:m,link:h,unlink:f}}var a={getScopedRepo:r},l=n(t.url+"/:scopeId/:key",{key:"@key"}),s=n(t.url+"/:scopeId/:schemeId/nodes/:nodeId",{schemeId:"@schemeId",nodeId:"@nodeId"}),d=n(t.url+"/:scopeId/:schemeId/nodes/:nodeId/children",{schemeId:"@schemeId",nodeId:"@nodeId"}),c=n(t.url+"/:scopeId/:schemeId/nodes/:nodeId/entryRef",{schemeId:"@schemeId",nodeId:"@nodeId"},{update:{method:"PUT"}});return a}e.$inject=["$q","$resource","$http"];var t={};return t.url="/api/categorizations",t.$get=e,t}angular.module("sdaReader").provider("categorizationService",e)}(),function(){"use strict";function e(){function e(e){function n(e,t){return o.get({scopeId:e,key:t})}var o=e(t.url+"/:scopeId/:key",{key:"@key"}),r={};return r.get=n,r}e.$inject=["$resource"];var t={};return t.url="/api/categorizations",t.$get=e,t}angular.module("sdaReader").provider("categorizationRepo",e)}(),function(){"use strict";function e(e){function t(t,n,o){t.$watch(o.ngModel,function(t){n.html(t||""),e.Hub.Queue(["Typeset",e.Hub,n.get(0)])})}var n={restrict:"EA",link:t};return n}e.$inject=["MathJax"],angular.module("sdaReader").directive("mathjax",e)}(),function(){"use strict";function e(e){var t=this;e.$watch("c.author",function(e){e&&(t.n=e.name||e.firstname+" "+e.lastname,t.e=e.properties.email,t.a=e.properties.affiliation)},!0)}e.$inject=["$scope"],angular.module("sdaReader").component("articleAuthor",{template:'<a ng-if="c.e" ng-href="mailto:{{c.e}}">{{c.n}}</a><span ng-if="!c.e">{{c.n}}</span>{{c.a ? ", " : ""}}<span class="affiliation" ng-if="c.a">{{c.a}}</span>',controller:e,controllerAs:"c",bindings:{author:"<"}})}(),function(){"use strict";function e(){function e(e){for(var t={parent:null,children:[],level:0},n=angular.element(e).find("h1,h2,h3,h4,h5,h6"),o=t,r=0;r<n.length;r++){for(var i=n[r],a=parseInt(i.tagName.substr(1));a<=o.level&&o.parent;)o=o.parent;var l=i.innerHTML.trim().replace(/<[^>]+>/g,""),s="x"+r+"-"+l.toLowerCase().replace(/[^\w]+/g,"-"),d={parent:o,level:a,el:i,text:l,id:s,children:[]};o.children.push(d),o=d}return t}var t={};return t.parse=e,t}angular.module("sdaReader").factory("tocGenerator",e)}(),function(){"use strict";function e(e,t,n){function o(t,n){function o(e,n){t.$emit("click:footnote",{id:e.id,note:e,$event:n})}function l(e,n){t.$emit("click:citation",{id:e.id,citation:e,$event:n})}t.$watch("body",function(i){if(i){n.html(i||""),e.Hub.Queue(["Typeset",e.Hub,n.get(0)]);var l=a(n);t.setToc&&t.setToc({toc:l}),r(n,t.footnotes,o)}}),t.$watch("footnotes",function(e){r(n,e,o)}),t.$watch("citations",function(e){i(n,e,l)})}function r(e,n,o){n&&e.find("sup.footnote[data-footnote]").each(function(e,r){var i=angular.element(r),a=i.data("footnote"),l=n[a];i.on("click",t.partial(o,l)).text(e+1)})}function i(e,n,o){n&&e.find("cite[id]").each(function(e,r){var i=angular.element(r),a=i.attr("id"),l=n[a];l&&i.on("click",t.partial(o,l)).html(l)})}function a(e){function t(e){for(var n=0;n<e.length;n++){var o=e[n],r=n<e.length?e[n+1]:null;angular.element(o.el).nextUntil(r?r.el:null).addBack().wrapAll('<section id="'+o.id+'"/>'),t(o.children)}}var o=n.parse(e);return t(o.children),o}var l={restrict:"E",scope:{body:"=",footnotes:"=",citations:"=",setToc:"&generateToc"},link:o};return l}e.$inject=["MathJax","_","tocGenerator"],angular.module("sdaReader").directive("articleParser",e)}(),function(){"use strict";angular.module("sdaLibrary",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcCore","trcBiblio","trcBio","trcRefs","trcReln","trcSeeAlso","sda","sdaSite"])}(),function(){"use strict";function e(){function e(e){var n="/book-reader/#/"+t.workId+"/"+e;return(t.editionId||t.volumeId)&&(n+="?"),t.editionId&&(n+="editionId="+t.editionId),t.editionId&&t.volumeId&&(n+="&"),t.volumeId&&(n+="volumeId="+t.volumeId),n}var t=this;t.getUrl=e}angular.module("sdaLibrary").component("readOnlineLink",{templateUrl:"app/research/components/read-online-link/read-online-link.html",bindings:{copies:"<",workId:"<",editionId:"<",volumeId:"<"},controller:e})}(),function(){"use strict";function e(e){function t(t){var n=t?[t.title,t.givenName,t.middleName,t.familyName,t.suffix]:[];return e.filter(n).join(" ")}return t}e.$inject=["_"],angular.module("sdaLibrary").filter("personName",e)}(),function(){"use strict";angular.module("sdaLibrary").component("personName",{templateUrl:"app/research/components/person-name/person-name.html",bindings:{name:"<"}})}(),function(){"use strict";angular.module("sdaLibrary").component("dateLocation",{templateUrl:"app/research/components/date-location/date-location.html",bindings:{event:"<"}})}(),function(){"use strict";angular.module("sdaConceptBrowser",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcBiblio","trcBio","trcGraph","sda","sdaSite"])}(),function(){"use strict";angular.module("sdaConceptBrowser").component("workInfo",{templateUrl:"app/influence-map/components/work-info/work-info.html",bindings:{work:"<",related:"<",activate:"&"}})}(),function(){"use strict";function e(){function e(e,t,o){t===n&&e.slideUp(250,"easeInOutCubic",o)}function t(e,t,o){t===n&&e.hide().slideDown(250,"easeInOutCubic",o)}var n="ng-hide";return{beforeAddClass:e,removeClass:t}}angular.module("sdaConceptBrowser").animation(".slide",e),jQuery.easing.easeInOutCubic=function(e,t,n,o,r){return(t/=r/2)<1?o/2*t*t*t+n:o/2*((t-=2)*t*t+2)+n}}(),function(){"use strict";angular.module("sdaConceptBrowser").component("relatedNodes",{templateUrl:"app/influence-map/components/related-nodes/related-nodes.html",bindings:{related:"<",activate:"&"}})}(),function(){"use strict";function e(e,t){var n=this;e.$watch("$ctrl.person",function(e){if(e){var o=t.searchByAuthor(e.id);o.$promise.then(function(){n.works=o.items})}})}e.$inject=["$scope","worksRepo"],angular.module("sdaConceptBrowser").component("personInfo",{templateUrl:"app/influence-map/components/person-info/person-info.html",bindings:{person:"<",related:"<",activate:"&"},controller:e})}(),function(){"use strict";function e(e,t){function n(n,o){var r=n.width,i=!1,a=n.height,l=!1,s=n.layout,d=o.get(0);t(function(){r||(r=o.width(),i=!0),a||(a=o.height(),l=!0);var t=ConceptBrowser(d,s).size([r,a]).edgeFilter(function(e){return 0===n.relnTypes.length||n.relnTypes.indexOf(e.relation)>=0});n.sizeMetric&&t.nodeCentralityMetric(n.sizeMetric),n.selectMode&&t.selectMode(n.selectMode),n.graph&&(t.data(n.graph.nodes,n.graph.edges),t.refresh()),angular.element(e).on("resize",function(){if(i||l){var e=r,n=a;i&&(r=o.width()),l&&(a=o.height()),e===r&&n===a||(t.size([r,a]),t.refresh())}});var c=!1;t.on("activate",function(e){c||n.$apply(function(){n.activeNode=e.node})}),n.$watchGroup(["width","height","graph","activeNode","sizeMetric","selectMode"],function(e,n){var o=!1;if(e[0]&&e[0]!==n[0]&&(r=e[0],t.size([r,a]),e[2]&&(o=!0)),e[1]&&e[1]!==n[1]&&(a=e[1],t.size([r,a]),e[2]&&(o=!0)),e[2]&&e[2]!==n[2]){var i=angular.copy(e[2]);t.data(i.nodes,i.edges),o=!0}e[3]!==n[3]&&(c=!0,t.activate(e[3]),c=!1),e[4]&&e[4]!==n[4]&&(t.nodeCentralityMetric(e[4]),o=!0),e[5]&&e[5]!==n[5]&&t.selectMode(e[5]),o&&t.refresh()}),n.$watchCollection("highlightedNodes",function(e){e&&t.highlight(e)}),n.$watchCollection("relnTypes",function(e){e&&t.updateGraphSelections()})})}var o={restrict:"E",scope:{graph:"=ngModel",width:"=",height:"=",padding:"=",layout:"@",activeNode:"=",sizeMetric:"=",selectMode:"=",highlightedNodes:"=",relnTypes:"="},link:n};return o}e.$inject=["$window","$timeout"],angular.module("sdaConceptBrowser").directive("conceptBrowser",e)}(),function(){"use strict";function e(e){var t=this;t.article=e}e.$inject=["article"],angular.module("sdaReader").controller("PreviewController",e)}(),function(){"use strict";function e(e,r,i,a,l,s,d,c,u,p,m){function h(){var e=a.$promise.then(function(){return m.render("chicago",a)});e.then(function(e){k.citations=e.citations,k.bibliography=e.bibliography}),c.$on("click:footnote",function(e,t){c.$apply(function(){b(t.note,t.$event)})}),c.$on("click:citation",function(e,t){c.$apply(function(){w(t.citation,t.$event)})}),k.orderedFootnotes=f(k.article),g()}function f(e){var t=[];return angular.element(e.body).find("sup.footnote[data-footnote]").each(function(n,o){var r=angular.element(o).data("footnote"),i=e.footnotes[r];i&&(t.indexOf(i)>=0?s.error("duplicate reference to footnote "+r):t.push(i))}),t}function g(){r.scrollTo&&u(function(){var e=p.findWhere(k.article.footnotes,{backlinkId:r.scrollTo});if(e)return void b(e);var t=p.findWhere(k.citations,{backlinkId:r.scrollTo});return t?void w(t):void v(r.scrollTo,!1)})}function v(e,t,n){n&&(n.preventDefault(),n.stopPropagation());var o=angular.element("#article-content"),r=angular.element("#"+e);try{t?o.duScrollToElementAnimated(r):o.duScrollToElement(r)}catch(t){s.warn("unable to scroll to element by id",e)}}function y(e,t){t&&(t.preventDefault(),t.stopPropagation());var n=angular.element("#article-content");e?n.duScrollTopAnimated(0):n.duScrollTop(0)}function b(e,t){angular.forEach(k.article.footnotes,function(e){e.active=!1}),e.active=!0,k.activeTab=n,v(e.backlinkId,!0,t)}function w(e,t){k.activeTab=o,v(e.id,!0,t)}var k=this;k.article=i,k.activeTab=t,k.links=[],k.orderedFootnotes=[],k.articleType=null,k.toc=[],k.citations=[],k.bibliography=[],k.titleCase=p.startCase,k.scrollTo=v,k.scrollToTop=y,k.activateNote=b,k.goBack=function(){e.go("sda.reader.main.preview",{id:k.article.id})},h()}e.$inject=["$state","$stateParams","article","references","articlesRepo","$log","$window","$scope","$timeout","_","refsRenderer"],angular.module("sdaReader").controller("ArticleController",e);var t=0,n=2,o=3}(),function(){"use strict";function e(e,t,n){var o=this;o.person=e,o.refs=t,o.relatedWorks=n}e.$inject=["person","refs","relatedWorks"],angular.module("sdaLibrary").controller("PersonController",e)}(),function(){"use strict";function e(e,t,n){var o=this;o.work=e,o.refs=t,o.title=n.getTitle(e.titles)}e.$inject=["work","refs","worksRepo"],angular.module("sdaLibrary").controller("BookController",e)}(),function(){"use strict";angular.module("trcGraph",["ngResource"])}(),function(){"use strict";function e(){function e(e){function n(e){return o.get({type:e})}var o=e(t.url+"/:type"),r={};return r.get=n,r}e.$inject=["$resource"];var t={};return t.url="/api/graph",t.$get=e,t}angular.module("trcGraph").provider("graphRepo",e)}(),function(){"use strict";function e(e,n){function o(o){var r={targetEvent:o,fullscreen:n("sm")||n("xs"),templateUrl:"app/help/help.html",controller:t,clickOutsideToClose:!0};e.show(r)}return{show:o}}function t(e,t){function n(){t.hide()}e.close=n}e.$inject=["$mdDialog","$mdMedia"],t.$inject=["$scope","$mdDialog"],angular.module("sdaConceptBrowser").factory("helpDialog",e)}(),function(){"use strict";angular.module("sdaSite",["ui.router","ngMaterial","trcArticles","trcBiblio","trcBio","trcCore","trcGraph","trcRefs","trcReln","trcSeeAlso","sdaBookReader","sdaConceptBrowser","sdaLibrary","sdaReader","sdaVwise","sda"])}(),function(){"use strict";angular.module("sdaSite").component("workAuthors",{templateUrl:"app/components/work-authors/work-authors.html",bindings:{authors:"<"}})}(),function(){"use strict";function e(e,t){var n=this;n.loading=!1,n.relns=null,e.$watch("$ctrl.token",function(e){if(e){n.loading=!0;var o=t.search(e),r=o.$promise.then(function(){var n=t.normalizeRelationships(o,e);return n.$promise});r.then(function(e){n.loading=!1,n.relns=e},function(){n.loading=!1,n.relns=null});
}})}e.$inject=["$scope","relnRepo"],angular.module("sdaSite").component("relationships",{templateUrl:"app/components/relationships/relationships.html",bindings:{token:"<"},controller:e})}(),function(){"use strict";function e(e,t){function n(t){t.$watchGroup(["bookId","page"],function(n){var i=n[0],a=n[1],l=o({scheme:"https",host:"archive.org",path:["stream",i],query:{ui:"embed"},fragment:r(a?"page/"+a:"","mode/2up")});t.src=e.trustAsResourceUrl(l)})}function o(e){var n=t.defaults(t.clone(e)||{},{scheme:"http",query:{}});if(!n.host)throw new Error("host option must be provided");return t.isArray(n.path)&&(n.path=r.apply(null,n.path)),t.isObject(n.query)&&(n.query=i(n.query,n.querySep)),n.scheme+"://"+r(n.host,n.path)+(n.query?"?"+n.query:"")+(n.fragment?"#"+n.fragment:"")}function r(){return t.chain(arguments).map(function(e){return t.trim(e,"\r\n\t /")}).filter().join("/")}function i(e,n){return n=n||"&",t.chain(e).map(function(e,n){return n?(t.isArray(e)||(e=[e]),t.map(e,function(e){return n+(e?"="+e:"")})):[]}).flatten().filter().join(n)}var a={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:n,scope:{bookId:"=",page:"="}};return a}e.$inject=["$sce","_"],angular.module("sdaSite").directive("iaReader",e)}(),function(){"use strict";function e(e,n){function o(o){o.$watchGroup(["bookId","page"],function(r){var i=r[0],a=r[1],l={id:i,ui:"embed"};a&&(l.seq=a);var s=n.map(l,function(e,t){return t+"="+e}).join(";"),d=t+"?"+s;o.src=e.trustAsResourceUrl(d)})}var r={restrict:"E",template:'<iframe ng-src="{{src}}">',replace:!0,link:o,scope:{bookId:"=",page:"="}};return r}e.$inject=["$sce","_"];var t="https://babel.hathitrust.org/cgi/pt";angular.module("sdaVwise").directive("hathitrustReader",e)}(),function(){"use strict";function e(){function e(e){angular.extend(n.options,e)}function t(e){return e.load(n.options)}t.$inject=["googleBooksScriptLoader"];var n={};return n.options={transport:"https",v:0,language:"en",preventLoad:!1},n.configure=e,n.$get=t,n}angular.module("sdaSite").provider("googleBooksApi",e)}(),function(){"use strict";function e(e,t,n,o){function r(e){return"auto"===e.transport?"//www.google.com/books/api.js?":e.transport+"://www.google.com/books/api.js?"}function i(e){var n=["transport","preventLoad","randomizedFunctionName"],i=o.map(o.omit(e,n),function(e,t){return t+"="+e});if(d){var a=t.getElementById(d);a.parentNode.removeChild(a)}else d="gbooks_load_"+Math.round(1e3*Math.random());i=i.join("&"),angular.element("<script>",{id:d,type:"text/javascript",src:r(e)+i}).appendTo(angular.element("body"))}function a(){return angular.isDefined(e.google)&&angular.isDefined(e.google.books)}function l(t){var o=n.defer();if(a())return o.resolve(e.google.books),o.promise;var r="onGoogleBooksReady"+Math.round(1e3*Math.random());return t.callback=r,e[r]=function(){e[r]=null,o.resolve(e.google.books)},t.preventLoad||i(t),c=t,c.randomizedFunctionName=r,o.promise}function s(){var t=c;a()?e[t.randomizedFunctionName]&&e[t.randomizedFunctionName]():i(t)}var d=void 0,c=void 0;return{load:l,manualLoad:s}}e.$inject=["$window","$document","$q","_"],angular.module("sdaSite").factory("googleBooksScriptLoader",e)}(),function(){"use strict";function e(e,t){function n(n,o){t.load(),e.then(function(e){var t=new e.DefaultViewer(o.get(0));n.$watch("bookId",function(e){t.load(e)}),n.$on("resize",function(){t.resize()})})}var o={restrict:"E",link:n,scope:{bookId:"=",page:"="}};return o}e.$inject=["googleBooksApi","googleBooksApiManualLoader"],angular.module("sdaSite").directive("googleBookReader",e)}(),function(){"use strict";function e(e){function t(){e.manualLoad()}var n={};return n.load=t,n}e.$inject=["googleBooksScriptLoader"],angular.module("sdaSite").service("googleBooksApiManualLoader",e)}(),function(){"use strict";function e(e){var n=this;e.$watch("$ctrl.content",function(e){n.longEnough=!e||e.length>t})}e.$inject=["$scope"],angular.module("sdaLibrary").component("collapsibleSummary",{templateUrl:"app/components/collapsible-summary/collapsible-summary.html",bindings:{content:"<"},controller:e});var t=500}(),function(){"use strict";function e(e,t,n,o,r,i,a,l,s,d,c,u,p){function m(){var e=n.workspaceId?c.when(n.workspaceId):t.listWorkspaceIds().then(function(e){return e.length>0?e[0]:null}),o=e.then(function(e){return t.getWorkspace(e)}).catch(function(){return t.createWorkspace()});o.then(function(e){g.workspace=e}),s.bindTo(r).add({combo:"ctrl+\\",description:"Toggle Sidebar",callback:function(){g.sidebarFocused=!g.sidebarFocused}}).add({combo:"/",description:"Search",callback:function(){g.searchQuery="",g.sidebarFocused?i(function(){angular.element("#searchQuery").focus()}):a("left").toggle()}}).add({combo:"n",description:"Create a new note panel",callback:function(){f(100,100)}})}function h(e){function t(e,t){return function(n){return n.forEach(function(n){n[e]=t}),n}}g.loading=!0,g.peopleResults=u.search(e),g.worksResults=p.search(e),c.all([g.peopleResults.$promise.then(d.property("items")).then(t("type","person")),g.worksResults.$promise.then(d.property("items")).then(t("type","work"))]).then(function(){g.loading=!1},function(){l.showSimple("Unable to load search results")})}function f(t,n){var o={note:""},r={xPosition:t,yPosition:n},i=e.findContentMediators(o,r),a=i.length>0?i[0]:null;g.workspace.createPanel(a,o,r)}var g=this;g.workspace=null,g.activeItems=[],g.searchQuery="",g.sidebarFocused=!0,g.search=d.debounce(h,300),m()}e.$inject=["panelContentMediatorRegistry","workspaceRepository","$stateParams","$log","$scope","$timeout","$mdSidenav","$mdToast","hotkeys","_","$q","peopleRepo","worksRepo"],angular.module("sdaVwise").controller("WorkspaceController",e)}(),function(){"use strict";function e(e,t,n,o,r,i,a,l,s,d,c){e.debug("runBlock end"),t.register(n),t.register(o),t.register(r),t.register(i),t.register(a),t.register(l),t.register(s),t.register(d),t.register(c)}e.$inject=["$log","panelContentMediatorRegistry","peopleContentMediator","worksContentMediator","editionsContentMediator","volumesContentMediator","googleBooksContentMediator","hathitrustContentMediator","internetArchiveContentMediator","noteContentMediator","passthruContentMediator"],angular.module("sdaVwise").run(e)}(),function(){"use strict";angular.module("sdaVwise").constant("vwise",vwise)}(),function(){"use strict";function e(e,t){e.debug("runBlock end"),t.$on("duScrollspy:becameActive",function(e,t){t.parents("li").addClass("active")}),t.$on("duScrollspy:becameInactive",function(e,t){t.parents("li").removeClass("active")})}e.$inject=["$log","$rootScope"],angular.module("sdaReader").run(e)}(),function(){"use strict";angular.module("sdaReader").constant("MathJax",MathJax)}(),function(){"use strict";function e(e){var t="/api/catalog";e.url=t+"/categorizations"}e.$inject=["categorizationRepoProvider"],angular.module("sdaReader").config(e)}(),function(){"use strict";function e(e,t,n,o,r){function i(e){return!1}function a(){c.queryResult.last&&t.get(c.queryResult.query.last.uri).then(function(e){c.queryResult=e.data})}function l(){c.queryResult.next&&t.get(c.queryResult.query.next.uri).then(function(e){c.queryResult=e.data})}function s(){c.queryResult.previous&&t.get(c.queryResult.query.previous.uri).then(function(e){c.queryResult=e.data})}function d(){c.queryResult.first&&t.get(c.queryResult.query.first.uri).then(function(e){c.queryResult=e.data})}var c=this;c.navigation=[],c.articleId=e.id,c.queryResult=null,c.search=i,c.displayFirstPage=d,c.displayPrevPage=s,c.displayNextPage=l,c.displayLastPage=a}e.$inject=["$stateParams","$http","$mdSidenav","$mdToast","articlesRepo"],angular.module("sdaReader").controller("ReaderController",e)}(),function(){"use strict";function e(e,t,n,o){function r(){e.get("/assets/data/navigation.json").then(function(e){a.navigation=e.data})}function i(e){a.loading=!0,a.results=o.search(e),a.results.$promise.then(function(){a.loading=!1},function(){a.loading=!1,a.results=null,n.showSimple("Failed to load search results")})}var a=this;a.navigation=[],a.search=i,a.loading=!1,a.results=null,a.startingPoints=[{author:"Spinoza",work:"Treatise Theological and Political",authorId:"9",workId:"64"},{author:"Leslie",work:"A Short and Easy Method with the Deists",authorId:"12",workId:"47"},{author:"Collins",work:"A Discourse of the Grounds and Reasons of the Christian Religion",authorId:"30",workId:"26"},{author:"Sherlock",work:"The Trial of the Witnesses of the Resurrection",authorId:"6",workId:"400"},{author:"Tindal",work:"Christianity as Old as the Creation",authorId:"3",workId:"68"},{author:"Butler",work:"The Analogy of Religion",authorId:"13",workId:"13"},{author:"Henry Dodwell Jr.",work:"Christianity Not Founded on Argument",authorId:"33",workId:"30"},{author:"Hume",work:"Philosophical Essays",authorId:"5",workId:"2"},{author:"Leland",work:"A View of the Principal Deistical Writers",authorId:"41",workId:"45"},{author:"Campbell",work:"A Dissertation on Miracles",authorId:"4",workId:"4"},{author:"Paley",work:"Horae Paulinae",authorId:"16",workId:"162"},{author:"Paley",work:"A View of the Evidences of Christianity",authorId:"16",workId:"1267"},{author:"Gibbon",work:"The Decline and Fall of the Roman Empire",authorId:"1142",workId:"1382"},{author:"Paine",work:"The Age of Reason, Part 2",authorId:"77",workId:"1691"},{author:"Watson",work:"An Apology for the Bible",authorId:"70",workId:"1474"},{author:"Strauss",work:"The Life of Jesus, Critically Examined",authorId:"10",workId:"909"},{author:"Whately",work:"Historic Doubts Relative to Napoleon Buonaparte",authorId:"68",workId:"1499"},{author:"Blunt",work:"Undesigned Coincidences",authorId:"61",workId:"181"},{author:"Temple, et al.",work:"Essays and Reviews",authorId:"",workId:"2002"},{author:"Colenso",work:"The Pentateuch and the Book of Joshua Critically Examined",authorId:"1477",workId:"2007"},{author:"Arnold",work:"Literature and Dogma",authorId:"1162",workId:"1711"},{author:"Cassels",work:"Supernatural Religion",authorId:"1130",workId:"1789"},{author:"Leathes",work:"Old Testament Prophecy",authorId:"522",workId:"765"}],r()}e.$inject=["$http","$mdSidenav","$mdToast","trcSearch"],angular.module("sdaLibrary").controller("LibraryController",e)}(),function(){"use strict";angular.module("sdaConceptBrowser").constant("d3",d3)}(),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.EventDispatcher=t()}(this,function(){"use strict";function e(){function e(e,t){r[e]&&r[e].forEach(function(e){try{e(t)}catch(e){console.error(e)}}),i.forEach(function(n){try{n(e,t)}catch(e){console.error(e)}})}function t(e){return i.push(e),function(){var t=i.indexOf(e);t>=0&&i.splice(t,1)}}function n(e,t){return r[e]||(r[e]=[]),r[e].push(t),function(){var n=r[e].indexOf(t);n>=0&&r[e].splice(n,1)}}function o(e,t){var o=n(e,function(e){try{t(e)}catch(e){console.error(e)}finally{o()}});return o}var r={},i=[],a={};return a.all=t,a.on=n,a.once=o,a.trigger=e,a}return e}),function(e,t){"function"==typeof define&&define.amd?define(["d3"],t):"object"==typeof module&&module.exports?module.exports=t(require("d3")):t(d3)}(this,function(e){"use strict";function t(e){e.fixed|=2}function n(e){e.fixed&=-7}function o(e){e.fixed|=4,e.px=e.x,e.py=e.y}function r(e){e.fixed&=-5}function i(e,t,n){var o=0,r=0;if(e.charge=0,!e.leaf)for(var a,l=e.nodes,s=l.length,d=-1;++d<s;)a=l[d],a&&(i(a,t,n),e.charge+=a.charge,o+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=t*n[e.point.index];e.charge+=e.pointCharge=c,o+=c*e.point.x,r+=c*e.point.y}e.cx=o/e.charge,e.cy=r/e.charge}function a(e){return"function"==typeof e}function l(e){return"number"==typeof e}var s=20,d=1,c=1/0;e.layout.force.cylindrical=function(){function u(e,t){return 2*Math.abs(e)>t&&(e<0?e+=t:e-=t),e}function p(e){return function(t,n,o,r){if(t.point!==e){var i=k[0],a=u(t.cx-e.x,i),l=t.cy-e.y,s=r-n,d=a*a+l*l,c=0;if(s*s/C<d)return d<P&&(c=t.charge/d,e.px-=a*c,e.py-=l*c),!0;t.point&&d&&d<P&&(c=t.pointCharge/d,e.px-=a*c,e.py-=l*c)}return!t.charge}}function m(t){t.px=e.event.x,t.py=e.event.y,b.resume()}var h,f,g,v,y,b={},w=e.dispatch("start","tick","end"),k=[1,1],$=.9,x=s,I=d,R=-30,P=c,M=.1,C=.64,j=[],q=[];return b.tick=function(){if((f*=.99)<.005)return w.end({type:"end",alpha:f=0}),!0;var t,n,o,r,a,l,s,d,c,m=j.length,h=q.length;for(n=0;n<h;++n)o=q[n],r=o.source,a=o.target,d=u(a.x-r.x,k[0]),c=a.y-r.y,l=d*d+c*c,0!==l&&(l=f*v[n]*((l=Math.sqrt(l))-g[n])/l,d*=l,c*=l,a.x-=d*(s=r.weight/(a.weight+r.weight)),a.y-=c*s,r.x+=d*(s=1-s),r.y+=c*s);if(s=f*M,0!==s&&(d=k[0]/2,c=k[1]/2,n=-1,s))for(;++n<m;)o=j[n],o.y+=(c-o.y)*s;if(R)for(i(t=e.geom.quadtree(j),f,y),n=-1;++n<m;)(o=j[n]).fixed||t.visit(p(o));for(n=-1;++n<m;)o=j[n],o.fixed?(o.x=o.px,o.y=o.py):(o.x-=(o.px-(o.px=o.x))*$,o.y-=(o.py-(o.py=o.y))*$);n=-1;for(var b=k[0];++n<m;){o=j[n];var x=o.px-o.x;o.x%=b,o.x<0&&(o.x+=b),o.px=o.x+x}w.tick({type:"tick",alpha:f})},b.nodes=function(e){return arguments.length?(j=e,b):j},b.links=function(e){return arguments.length?(q=e,b):q},b.size=function(e){return arguments.length?(k=e,b):k},b.linkDistance=function(e){return arguments.length?(x=a(e)?e:+e,b):x},b.linkStrength=function(e){return arguments.length?(I=a(e)?e:+e,b):I},b.friction=function(e){return arguments.length?($=+e,b):$},b.charge=function(e){return arguments.length?(R=a(e)?e:+e,b):R},b.chargeDistance=function(e){return arguments.length?(P=e*e,b):Math.sqrt(P)},b.gravity=function(e){return arguments.length?(M=+e,b):M},b.theta=function(e){return arguments.length?(C=e*e,b):Math.sqrt(C)},b.alpha=function(t){return arguments.length?(t=+t,f?f=t>0?t:0:t>0&&(w.start({type:"start",alpha:f=t}),e.timer(b.tick)),b):f},b.start=function(){function e(e,o){if(!n){for(n=new Array(r),d=0;d<r;++d)n[d]=[];for(d=0;d<i;++d){var a=q[d];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var l,s=n[t],d=-1,c=s.length;++d<c;)if(!isNaN(l=s[d][e]))return l;return Math.random()*o}var t,n,o,r=j.length,i=q.length,s=k[0],d=k[1];for(t=0;t<r;++t)(o=j[t]).index=t,o.weight=0;for(t=0;t<i;++t)o=q[t],l(o.source)&&(o.source=j[o.source]),l(o.target)&&(o.target=j[o.target]),++o.source.weight,++o.target.weight;for(t=0;t<r;++t)o=j[t],isNaN(o.x)&&(o.x=e("x",s)),isNaN(o.y)&&(o.y=e("y",d)),isNaN(o.px)&&(o.px=o.x),isNaN(o.py)&&(o.py=o.y);if(g=[],a(x))for(t=0;t<i;++t)g[t]=+x.call(this,q[t],t);else for(t=0;t<i;++t)g[t]=x;if(v=[],a(I))for(t=0;t<i;++t)v[t]=+I.call(this,q[t],t);else for(t=0;t<i;++t)v[t]=I;if(y=[],a(R))for(t=0;t<r;++t)y[t]=+R.call(this,j[t],t);else for(t=0;t<r;++t)y[t]=R;return b.resume()},b.resume=function(){return b.alpha(.1)},b.stop=function(){return b.alpha(0)},b.drag=function(){return h||(h=e.behavior.drag().origin(function(e){return e}).on("dragstart.force",t).on("drag.force",m).on("dragend.force",n)),arguments.length?void this.on("mouseover.force",o).on("mouseout.force",r).call(h):h},b.edgePath=function(){var e=k[0],t=function(e){return e[0][0]},n=function(e){return e[0][1]},o=function(e){return e[1][0]},r=function(e){return e[1][1]},i=function(i){i.attr("d",function(i){var a=t(i),l=n(i),s=o(i),d=r(i);return 2*Math.abs(a-s)<e?"M "+a+" "+l+" L "+s+" "+d:a<s?"M "+a+" "+l+" L "+(s-e)+" "+d+" M "+s+" "+d+" L "+(a+e)+" "+l:"M "+a+" "+l+" L "+(s+e)+" "+d+" M "+s+" "+d+" L "+(a-e)+" "+l})};return i.x1=function(e){return t=e,i},i.y1=function(e){return n=e,i},i.x2=function(e){return o=e,i},i.y2=function(e){return r=e,i},i},e.rebind(b,w,"on")}}),function(e,t){"function"==typeof define&&define.amd?define(["d3","event-dispatcher","d3-force-cylindrical"],t):"object"==typeof module&&module.exports?(require("d3-force-cylindrical"),module.exports=t(require("d3"),require("event-dispatcher"))):e.ConceptBrowser=t(e.d3,e.EventDispatcher)}(this,function(e,t){"use strict";function n(n,d,c){function u(e){return L=e[0],W=e[1],ie&&(F.attr("width",L).attr("height",W),Q.range([0,L]),Y.size([L,W])),de}function p(t){if(le=t,ie){var n=e.extent(K,le);J.domain(n[0]===n[1]?[n[0]-1,n[1]+1]:n)}return de}function m(e){return ae=e,de}function h(e,t){return K=e,X=t,K.forEach(function(e){e.x=(e.x||Math.random())*L,e.y=(e.y||Math.random())*W}),de}function f(e){e instanceof Array||(e=[e]);var t=e.every(function(e){return K.indexOf(e)>=0});if(!t)throw new Error("some node(s) to be highlighted are not members of the graph");return R(),I(e),de}function g(e){if(e&&K.indexOf(e)<0)throw new Error("node to be activated is not a member of the graph");return j(),e&&(C(e),S(),q(e)),de}function v(e){return se=e,de}function y(){return b(),Y.nodes(K).links(X).start(),$(),x(),de}function b(){if(!L||!W)throw new Error("No width/height set. Use size([width, height]) to set size before initializing");if(!K||!X)throw new Error("No nodes/edges set. Use data(nodes, edges) to set them before initializing");if(!ie){ie=!0,F=e.select(n).append("svg").attr("width",L).attr("height",W);var t=X.reduce(function(e,t){return e.indexOf(t.relation)<0&&e.push(t.relation),e},[]);O(F,t,["","activated","selected","focused"]);var s=F.append("g").attr("class","concept-browser");V=s.append("g").attr("class","edges"),U=s.append("g").attr("class","nodes"),H=s.append("rect").attr("class","progress").attr("x",0).attr("y",0).attr("height",2),Q=e.scale.linear().domain([Math.log(.1),Math.log(.005)]).range([0,L]);var c=e.extent(K,le);J=e.scale.linear().domain(c[0]===c[1]?[c[0]-1,c[1]+1]:c).range([0,1]),G=function(e){return r+(i-r)*J(e)},Y=a[d||"planar"]().size([L,W]).on("tick",k),w(Y),Y.edgePath&&(oe=Y.edgePath().x1(function(e){return e.source.x}).y1(function(e){return e.source.y}).x2(function(e){return e.target.x}).y2(function(e){return e.target.y})),e.tip&&(re=e.tip().attr("class",l).direction(_).offset(z).html(function(e){return e.label}),D.on("focus",function(e){A(e.node)}),D.on("blur",function(e){E(e.node)}));var u=o(B,100,!0,!0);D.on("highlight",u),D.on("unhighlight",u),D.on("focus",u),D.on("blur",u),D.on("select",u),D.on("deselect",u),D.on("activate",u),D.on("deactivate",u)}}function w(e){e.gravity(.1).linkDistance(50).linkStrength(function(e){var t=le(e.source);return J(t)}).charge(function(e){var t=[-50,-300],n=[0,1],o=le(e);return t[0]+(t[1]-t[0])/(n[1]-n[0])*(J(o)-n[0])}).friction(.9)}function k(e){if(N(),e.alpha>.0051){if(H.attr("width",Q(Math.log(e.alpha))),Math.random()<.9)return}else H.attr("width",0);U.selectAll(".node").transition().duration(500).attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),V.selectAll(".edge").transition().duration(500).call(oe)}function $(){if(!K||0===K.length)throw new Error("no nodes provided");var t=U.selectAll(".node").data(K,function(e){return e.id}),n=t.enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).on("mouseover",P).on("mouseout",M).on("dblclick",C).on("click",function(t){e.event.ctrlKey||e.event.metaKey||e.event.shiftKey?te.indexOf(t)<0?q(t):T(t):(S(),q(t))});n.append("circle"),t.select("circle").attr("r",function(e){var t=le(e);return G(t)}),t.exit().remove(),re&&U.call(re)}function x(){if(!X||0===X.length)throw new Error("no edges provided");var e=V.selectAll(".edge").data(X,function(e){return e.source.id+","+e.target.id});e.enter().append("path").attr("class",function(e){return"edge "+e.relation}).attr("marker-end",function(e){return"url(#arrowhead-"+e.relation+")"}).call(oe),e.exit().remove()}function I(e){e instanceof Array||(e=[e]),e.forEach(function(e){Z.indexOf(e)<0&&Z.push(e),D.trigger("highlight",{node:e,selection:te})})}function R(){Z.forEach(function(e){D.trigger("unhighlight",{node:e,selection:te})}),Z=[]}function P(e){M(),ee=e,D.trigger("focus",{node:ee,selection:te})}function M(e){if(e=e||ee){if(ee!==e)throw new Error("tried to blur a node that was not focused");ee=null,D.trigger("blur",{node:e,selection:te})}}function C(e){ne!==e&&(j(),ne=e,D.trigger("activate",{node:ne,selection:te}))}function j(e){if(e=e||ne){if(ne!==e)throw new Error("tried to deactivate a node that was not activated");ne=null,D.trigger("deactivate",{node:e,selection:te})}}function q(e){if(!e)throw new Error("no node provided");if(!(te.indexOf(e)<0))throw new Error("tried to select a node that is already selected");te.push(e),D.trigger("select",{node:e,selection:te})}function T(e){if(!e)throw new Error("no node provided to deselect");var t=te.indexOf(e);if(t<0)throw new Error("tried to deselect a node that was not selected");te.splice(t,1),D.trigger("deselect",{node:e,selection:te})}function S(){te.forEach(function(e){D.trigger("deselect",{node:e,selection:[]})}),te=[]}function A(e){re&&re.attr("class",l).show(e)}function E(e){re&&re.attr("class",l).hide(e)}function B(){var e=[ne],t=te.slice(),n=ae(ee);te.forEach(function(e){ae(e).forEach(function(e){n.indexOf(e)<0&&n.push(e)})}),ae(ne).forEach(function(e){n.indexOf(e)<0&&n.push(e)});var o=Z.slice();U.selectAll(".node").classed("activated",function(t){return e.indexOf(t)>=0}).classed("selected",function(e){return t.indexOf(e)>=0}).classed("focused",function(e){return n.indexOf(e)>=0}).classed("highlighted",function(e){return o.indexOf(e)>=0}),V.selectAll(".edge").classed("activated",function(t){return e.indexOf(t.source)>=0&&e.indexOf(t.target)>=0}).classed("selected",function(e){return t.indexOf(e.source)>=0&&t.indexOf(e.target)>=0}).classed("focused",function(e){return n.indexOf(e.source)>=0&&n.indexOf(e.target)>=0}).classed("hidden",function(e){return!se(e)}).attr("marker-end",function(o){var r="";return e.indexOf(o.source)>=0&&e.indexOf(o.target)>=0?r="-activated":t.indexOf(o.source)>=0&&t.indexOf(o.target)>=0?r="-selected":n.indexOf(o.source)>=0&&n.indexOf(o.target)>=0&&(r="-focused"),"url(#arrowhead-"+o.relation+r+")"})}function N(){K.forEach(function(e){e.x=Math.max(Math.min(e.x,L),0),e.y=Math.max(Math.min(e.y,W),0)})}function _(e){var t="";return e.y>W-s.bottom?t+="n":e.y<s.top&&(t+="s"),e.x>L-s.right?t+="w":e.x<s.left&&(t+="e"),""===t&&(t="n"),t}function z(e){var t=le(e),n=G(t),o=[0,0];return e.y>W-s.bottom?o[0]-=n:e.y<s.top&&(o[0]+=n),e.x>L-s.left_right?o[1]-=n:e.x<s.left_right&&(o[1]+=n),0===o[1]&&0===o[0]&&(o[0]-=n),o}function O(e,t,n){var o=[];t.forEach(function(e){n.forEach(function(t){o.push("arrowhead-"+e+(t?"-"+t:""))})}),e.append("defs").selectAll("marker").data(o).enter().append("marker").attr("id",function(e){return e}).attr("viewBox","0 -4 10 8").attr("refX",25).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0,-4 L 10,0 L 0,4")}d=d||"planar",c=c||{};var D=t();c.debug&&D.all(function(e,t){console.log(e,t.node?t.node.id:t)});var L,W,F,U,V,H,Q,G,J,Y,K=[],X=[],Z=[],ee=null,te=[],ne=null,oe=function(e){e.attr("d",function(e){var t=e.source.x,n=e.source.y,o=e.target.x,r=e.target.y;return"M "+t+" "+n+" L "+o+" "+r})},re=null,ie=!1,ae=function(e){if(!e)return[];var t=e.outEdges.forEach(function(e){return e.target}),n=e.inEdges.forEach(function(e){return e.source});return[e].concat(t,n)},le=function(){return 1},se=function(){return!0},de={};return de.size=u,de.nodeCentralityMetric=p,de.selectMode=m,de.data=h,de.highlight=f,de.activate=g,de.edgeFilter=v,de.updateGraphSelections=B,de.refresh=y,de.on=D.on,de}function o(e,t,n,o){var r;return"undefined"==typeof n&&(n=!0),"undefined"==typeof o&&(o=!1),function(){function i(){r=null,o&&e.apply(a,l)}var a=this,l=arguments,s=n&&!r;clearTimeout(r),r=setTimeout(i,t),s&&e.apply(a,l)}}var r=5,i=13,a={planar:e.layout.force,cylindrical:e.layout.force.cylindrical},l="d3-tip",s={left:200,right:200,top:100,bottom:100};return e.tip||console.warn("d3.tip is not available; tooltips will not display properly."),n}),function(){"use strict";function e(e,n,o,r,i,a,l,s,d,c){function u(e){return 0===b.relnTypeFilter.length||b.relnTypeFilter.indexOf(e.relation)>=0}function p(){var t="people";b.graphType=o.type||t,b.graphLoading=!0;var i=y(b.graphType);t!==b.graphType&&(i=i.catch(function(){return n.showSimple('Unable to load the "'+b.graphType+'"graph type. Falling back to "'+t+'".'),y(t)})),i.then(function(e){b.graphLoading=!1,b.graph=e.graph},function(){b.graphLoading=!1,n.showSimple("Unable to load graph data.")}),e.$watch("vm.activeNode",function(e){e?(b.sidebarLoading=!0,g(e).then(function(){b.sidebarLoading=!1},function(){b.sidebarLoading=!1,n.showSimple("Unable to load node data")})):b.nodeData=null}),e.$watch("searchQuery",function(e){b.highlightedNodes=e?r("filter")(b.graph.nodes,{label:e}):[]})}function m(e){var t=b.relnTypeFilter.indexOf(e);t<0?b.relnTypeFilter.push(e):b.relnTypeFilter.splice(t,1)}function h(){b.showSearchForm=!b.showSearchForm,b.showSearchForm?i(function(){angular.element('.search-form > input[type="search"]').focus()}):e.searchQuery=""}function f(){e.searchQuery="",i(function(){b.showSearchForm=!1})}function g(e){return b.nodeData=function(){switch(e.metadata.type){case"trc.entries.biographical":return s.get(e.metadata.id);case"trc.entries.bibliographic":return d.getWork(e.metadata.id);default:return null}}(),b.related=v(e),b.nodeData.$promise}function v(e){function n(e,n,o){return function(i){var a=t[i.relation];if(a){var l=r(e,a),s=i[n];l[a.directed?o:"none"].nodes[s.id]=s}}}function o(e){var t={id:e.id,directed:e.directed};return e.directed?(t.out={label:e.title,nodes:{}},t.in={label:e.reverseTitle,nodes:{}}):t.none={label:e.title,nodes:{}},t}function r(e,t){return e.hasOwnProperty(t.id)||(e[t.id]=o(t)),e[t.id]}var i={};return e.outEdges.forEach(n(i,"target","out")),e.inEdges.forEach(n(i,"source","in")),a.values(i).map(function(e){return e.in&&e.in.nodes&&(e.in.nodes=a.values(e.in.nodes)),e.out&&e.out.nodes&&(e.out.nodes=a.values(e.out.nodes)),e.none&&e.none.nodes&&(e.none.nodes=a.values(e.none.nodes)),e})}function y(e){var t=c.get(e);return t.$promise.then(function(){var e={};return t.graph.nodes.forEach(function(t){t.inEdges=[],t.outEdges=[],e[t.id]=t}),t.graph.edges.forEach(function(t){var n=e[t.source],o=e[t.target];t.source=o,o.outEdges.push(t),t.target=n,n.inEdges.push(t)}),t})}var b=this;b.toggleSearchForm=h,b.clearSearchForm=f,b.showSearchForm=!1,b.searchQuery="",b.graphType="",b.showHelp=l.show,b.graph=null,b.activeNode=null,b.nodeData=null,b.works=null,b.related=null,b.sidebarLoading=!1,b.graphLoading=!1,b.relnTypes=t,b.relnTypeFilter=[],b.toggleRelnTypeFilter=m,b.selectModes=[{label:"Neighbors",strategy:function(e){if(!e)return[];var t=e.outEdges.filter(u).map(function(e){return e.target}),n=e.inEdges.filter(u).map(function(e){return e.source});return[e].concat(t,n)}},{label:"Trace",strategy:function(e){if(!e)return[];for(var t=[e],n=[];t.length>0;){var o=t.pop();n.push(o),o.outEdges.forEach(function(e){n.indexOf(e.target)<0&&t.push(e.target)})}return n}},{label:"Inbound",strategy:function(e){return e?[e].concat(e.inEdges.filter(u).map(function(e){return e.source})):[]}},{label:"Outbound",strategy:function(e){return e?[e].concat(e.outEdges.filter(u).map(function(e){return e.target})):[]}}],b.selectMode=b.selectModes[0],b.sizeMetrics=[{label:"PageRank",strategy:function(e){return e.metadata.pagerank}},{label:"Uniform",strategy:function(){return 1}},{label:"HITS",disabled:!0,strategy:function(){return 1}}],b.sizeMetric=b.sizeMetrics[0],b.highlightedNodes=[],p()}e.$inject=["$scope","$mdToast","$stateParams","$filter","$timeout","_","helpDialog","peopleRepo","worksRepo","graphRepo"];var t={"uk.ac.ox.bodleian.sda.relationships.influence":{id:"uk.ac.ox.bodleian.sda.relationships.influence",title:"Influenced",reverseTitle:"Influenced By",directed:!0},"uk.ac.ox.bodleian.sda.relationships.provoked":{id:"uk.ac.ox.bodleian.sda.relationships.provoked",title:"Provoked",reverseTitle:"Provoked By",directed:!0},"uk.ac.ox.bodleian.sda.relationships.patternmatch":{id:"uk.ac.ox.bodleian.sda.relationships.patternmatch",title:"Possible Pattern Match",directed:!1}};angular.module("sdaConceptBrowser").controller("ConceptBrowserController",e)}(),function(){"use strict";angular.module("sdaBookReader",["ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ngMaterial","trcBiblio","trcReln","sda","sdaSite"])}(),function(){"use strict";function e(e,t,n,o){function r(){i.lockSidebar=!i.lockSidebar,e(function(){t.$broadcast("resize")},500)}var i=this;i.copyRef=n,i.work=o,i.lockSidebar=!0,i.toggleSidenav=r}e.$inject=["$timeout","$rootScope","copyRef","work"],angular.module("sdaBookReader").controller("BookReaderController",e)}(),function(){"use strict";function e(e){e.definePalette("darkBrown",{50:"#595c59",100:"#4c4f4c",200:"#404240",300:"#333533",400:"#272827",500:"#1a1b1a",600:"#0d0e0d",700:"#010101",800:"#000000",900:"#000000",A100:"#e0f0e0",A200:"#565956",A400:"#7e837e",A700:"#000000",contrastDefaultColor:"light",contrastDarkColors:["A100"]}),e.definePalette("copper",{50:"#d4b190",100:"#cca47e",200:"#c5976b",300:"#be8a59",400:"#b67e47",500:"#a47140",600:"#926439",700:"#7f5832",800:"#6d4b2b",900:"#5b3e23",A100:"#dcc3ab",A200:"#a47140",A400:"#48321c",A700:"#272927",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","A100"]}),e.theme("default").primaryPalette("darkBrown").accentPalette("copper")}e.$inject=["$mdThemingProvider"],angular.module("sdaSite").config(e)}(),function(){"use strict";function e(e,t,n,o){e.debug("runBlock end"),t.$on("$stateChangeSuccess",function(){o("send","pageview",{page:n.url()})})}e.$inject=["$log","$rootScope","$location","analytics"],angular.module("sdaSite").run(e)}(),function(){"use strict";function e(e,t){e.state("book-reader",{url:"/book-reader/:workId/:copyId?editionId&volumeId",templateUrl:"app/book-reader/book-reader.html",controller:"BookReaderController",controllerAs:"vm",resolve:{copyRef:["$stateParams","worksRepo",function(e,t){"ngInject";var n=t.getDigitalCopy(e.copyId,e.workId,e.editionId,e.volumeId);return n.$promise}],work:["$stateParams","worksRepo",function(e,t){"ngInject";var n=t.getWork(e.workId);return n.$promise}]}}).state("concept-browser",{url:"/influence-map/:type",templateUrl:"app/influence-map/concept-browser.html",controller:"ConceptBrowserController",controllerAs:"vm"}).state("library",{url:"/research",templateUrl:"app/research/library.html",controller:"LibraryController",controllerAs:"vm"}).state("library.person",{url:"/people/:id",templateUrl:"app/research/person/person.html",controller:"PersonController",controllerAs:"vm",resolve:{person:["$stateParams","peopleRepo",function(e,t){"ngInject";var n=t.get(e.id);return n.$promise}],refs:["$stateParams","peopleRepo","refsRepoFactory",function(e,t,n){"ngInject";var o=t.getReferencesEndpoint(e.id),r=n.getRepo(o),i=r.get();return i.$promise}],relatedWorks:["$stateParams","worksRepo",function(e,t){"ngInject";var n=t.searchByAuthor(e.id);return n.$promise.then(function(e){return e.items})}]}}).state("library.book",{url:"/books/:id",templateUrl:"app/research/book/book.html",controller:"BookController",controllerAs:"vm",resolve:{work:["$stateParams","worksRepo",function(e,t){"ngInject";var n=t.getWork(e.id);return n.$promise}],refs:["$stateParams","worksRepo","refsRepoFactory",function(e,t,n){"ngInject";var o=t.getReferencesEndpoint(e.id),r=n.getRepo(o),i=r.get();return i.$promise}]}}).state("reader",{url:"/themes?id",templateUrl:"app/themes/reader.html",controller:"ReaderController",controllerAs:"vm"}).state("reader.preview",{url:"/preview",templateUrl:"app/themes/preview/preview.html",controller:"PreviewController",controllerAs:"vm",resolve:{article:["$stateParams","articlesRepo",function(e,t){var n=t.get(e.id);return n.$promise}]}}).state("article",{url:"/themes/article/:id",templateUrl:"app/themes/article/article.html",controller:"ArticleController",controllerAs:"vm",resolve:{article:["$stateParams","articlesRepo",function(e,t){var n=t.get(e.id);return n.$promise}],references:["$stateParams","articlesRepo","refsRepoFactory",function(e,t,n){var o=t.getReferencesEndpoint(e.id),r=n.getRepo(o);return r.get()}]}}).state("vwise",{url:"/vwise",templateUrl:"app/vwise/workspace.html",controller:"WorkspaceController",controllerAs:"vm"}),t.otherwise("/research")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("sdaSite").config(e)}(),function(){"use strict";
angular.module("sdaSite").constant("ga",ga)}(),function(){"use strict";function e(e,t,n,o,r,i,a,l,s,d,c){e.debugEnabled(!0);var u="/api/catalog";t.url=u+"/works",n.url=u+"/people",r.url=u+"/relationships",l.url=u+"/entries/articles",i.url=u+"/seealso",o.url=u+"/search",a.url=u+"/graph",c.configure({preventLoad:!0}),s.url="/assets/data/navigation.json",d.id="UA-87254463-1"}e.$inject=["$logProvider","worksRepoProvider","peopleRepoProvider","trcSearchProvider","relnRepoProvider","seeAlsoRepoProvider","graphRepoProvider","articlesRepoProvider","sdaSitenavProvider","analyticsProvider","googleBooksApiProvider"],angular.module("sdaSite").config(e)}(),function(){"use strict";function e(e,o){function r(t,n){function o(e){return e.get("/assets/csl/locales/locales-"+t+".xml").then(function(e){return e.data})}o.$inject=["$http"],e.addLocale(n,o)}function i(t,n){function o(e){return e.get("/assets/csl/styles/"+t+".csl").then(function(e){return e.data})}o.$inject=["$http"],e.addStyle(n,o)}o.typemapUrl="/assets/typemap/zotero-csl.json",angular.forEach(t,r),angular.forEach(n,i)}e.$inject=["citeprocProvider","refsRendererProvider"],angular.module("sdaSite").config(e);var t={"en-US":"en-US"},n={mla:"modern-language-association",chicago:"chicago-author-date"}}(),angular.module("sdaSite").run(["$templateCache",function(e){e.put("app/book-reader/book-reader.html",'<md-toolbar class=layout-navbar> <div class=md-toolbar-tools layout=row layout-align="start stretch"> <div layout=row layout-align="center center"> <md-button class="md-accent md-icon-button" ng-click=vm.toggleSidenav($event)> <md-icon>menu</md-icon> </md-button> <a class=logo href=/ layout=column layout-align="center center"> <img src=/assets/images/sda-logo-light.png alt=SDA flex=nogrow> </a> </div> <sda-sitenav layout=column></sda-sitenav> </div> </md-toolbar> <main layout=row layout-align=center flex> <md-sidenav class=book-info md-component-id=left class=md-sidenav-left md-is-locked-open=vm.lockSidebar layout=column layout-padding> <div> <h1 class="md-title title"> <work-title title=vm.work.titles></work-title> </h1> <p class=by-line>by <work-authors authors=vm.work.authors></work-authors></p> </div> <collapsible-summary ng-if=vm.work.summary content=vm.work.summary></collapsible-summary> <div flex></div> <relationships token=vm.work.ref.token></relationships> </md-sidenav> <div layout=column flex> <div ng-switch=vm.copyRef.type layout=column layout-padding flex> <hathitrust-reader ng-switch-when=hathitrust book-id=vm.copyRef.properties.htid page=vm.copyRef.properties.seq flex></hathitrust-reader> <ia-reader ng-switch-when=internetarchive book-id=vm.copyRef.properties.id page=vm.copyRef.properties.seq flex></ia-reader> <google-book-reader ng-switch-when=googlebooks book-id=vm.copyRef.properties.id flex></google-book-reader> <div ng-switch-default layout=column layout-align="center center" flex> <div class=md-display-1 ng-if=vm.loading> Sorry. We were unable to load a book reader for that resource. </div> <div class=md-display-1 ng-if=!vm.loading layout=column flex layout-align="center center"> <div>Loading book reader&hellip;</div> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> </div> </div> </div> </main> '),e.put("app/research/library.html",'<sda-header md-sidenav-id=left active-url=/research></sda-header> <div class="page-banner library shade" layout=row layout-align=center> <div class=container flex> <h1>Research</h1> </div> </div> <div layout=row layout-align=center flex> <main class=container layout=row flex> <md-sidenav md-component-id=left class=md-sidenav-left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <div layout=row flex=none> <md-input-container flex> <label>search</label> <md-icon>search</md-icon> <input type=search ng-model=query ng-model-options="{debounce: 500}" ng-change=vm.search(query)> </md-input-container> </div> <div layout=row ng-if=vm.loading layout-align="center center" flex> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <md-content ng-if="!vm.loading && vm.results" flex> <div ng-if="vm.results.results.people.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="hidePeople = !hidePeople"> <md-icon>{{hidePeople ? \'keyboard_arrow_right\' : \'expand_more\'}}</md-icon> People </md-subheader> <md-list class=slide ng-hide=hidePeople> <md-list-item class=md-2-line ng-repeat="person in vm.results.results.people" ui-sref=".person({id: person.id})"> <div class=md-list-item-text> <h3 ng-bind-html=person.label></h3> <p ng-bind-html=person.summaryExcerpt></p> </div> </md-list-item> </md-list> </div> <div ng-if="vm.results.results.works.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="hideWorks = !hideWorks"> <md-icon>{{hideWorks ? \'keyboard_arrow_right\' : \'expand_more\'}}</md-icon> Works </md-subheader> <md-list class=slide ng-hide=hideWorks> <md-list-item ng-repeat="work in vm.results.results.works" ui-sref=".book({id: work.id})" aria-label="work.label | stripTags"> <div class=md-list-item-text ng-bind-html=work.label></div> </md-list-item> </md-list> </div> </md-content> </md-sidenav> <md-content layout=column flex ui-view> <div flex=noshrink layout=row layout-padding layout-margin> <section flex=66> <div class=tools layout=row layout-align=center> <a ui-sref=concept-browser> <md-card> <img src=/assets/images/tile-influence-map.png class=md-card-image> <md-card-content> <h3>Influence Map</h3> </md-card-content> </md-card> </a> <a ui-sref=vwise> <md-card> <img src=/assets/images/tile-vwise.png class=md-card-image> <md-card-content> <h3>Visual Workspace</h3> </md-card-content> </md-card> </a> </div> </section> <aside class=starting-points flex=33> <h2>Starting Points</h2> <md-list> <md-list-item ng-repeat="book in vm.startingPoints"> <div class="md-list-item-text bibentry-label"> <a ui-sref=".person({id: book.authorId})" ng-bind-html=book.author></a>, <a class=title ng-bind-html=book.work ui-sref=".book({id: book.workId})"></a> </div> </md-list-item> </md-list> </aside> </div> </md-content> </main> </div> '),e.put("app/influence-map/concept-browser.html",'<md-toolbar class=layout-navbar> <div class=md-toolbar-tools layout-align="center stretch"> <a class=logo href=/ layout=column layout-align="center center"> <img src=/assets/images/sda-logo-light.png alt=SDA flex=nogrow> </a> <sda-sitenav layout=column active-url=/research></sda-sitenav> <span flex></span> <div layout=row layout-align="start center"> <md-button class=md-icon-button aria-label="Show People" ng-if="vm.graphType == \'works\'" ui-sref="home({type: \'people\'})"> <md-icon>person</md-icon> <md-tooltip>Show People</md-tooltip> </md-button> <md-button class=md-icon-button aria-label="Show Books" ng-if="vm.graphType == \'people\'" ui-sref="home({type: \'works\'})"> <md-icon>book</md-icon> <md-tooltip>Show Books</md-tooltip> </md-button> <md-menu> <md-button class=md-icon-button md-menu-origin ng-click=$mdOpenMenu($event) aria-label="Ranking Model"> <md-icon>adjust</md-icon> <md-tooltip>Ranking Model</md-tooltip> </md-button> <md-menu-content> <md-menu-item ng-repeat="metric in vm.sizeMetrics"> <md-button ng-click="vm.sizeMetric = metric" ng-disabled=metric.disabled> <md-icon md-menu-align-target>radio_button_{{vm.sizeMetric === metric ? \'\' : \'un\'}}checked</md-icon> {{metric.label}} </md-button> </md-menu-item></md-menu-content> </md-menu> <md-menu> <md-button class=md-icon-button md-menu-origin ng-click=$mdOpenMenu($event) aria-label="Selection Mode"> <md-icon>device_hub</md-icon> <md-tooltip>Selection Mode</md-tooltip> </md-button> <md-menu-content> <md-menu-item ng-repeat="mode in vm.selectModes"> <md-button ng-click="vm.selectMode = mode" ng-disabled=metric.disabled> <md-icon md-menu-align-target>radio_button_{{vm.selectMode === mode ? \'\' : \'un\'}}checked</md-icon> {{mode.label}} </md-button> </md-menu-item></md-menu-content> </md-menu> <md-menu> <md-button class=md-icon-button md-menu-origin ng-click=$mdOpenMenu($event) aria-label="Relationship Types"> <md-icon>filter_list</md-icon> <md-tooltip>Filter Types</md-tooltip> </md-button> <md-menu-content> <md-menu-item> <md-button ng-click="vm.relnTypeFilter = []"> <md-icon md-menu-align-target>check_box{{vm.relnTypeFilter.length &gt; 0 ? \'_outline_blank\' : \'\'}}</md-icon> All Relationships </md-button> </md-menu-item> <md-divider></md-divider> <md-menu-item ng-repeat="type in vm.relnTypes"> <md-button ng-click=vm.toggleRelnTypeFilter(type.id) md-prevent-menu-close> <md-icon md-menu-align-target>check_box{{vm.relnTypeFilter.indexOf(type.id) &lt; 0 ? \'_outline_blank\' : \'\'}}</md-icon> {{type.title}} </md-button> </md-menu-item> </md-menu-content> </md-menu> <md-button class=md-icon-button ng-click=vm.toggleSearchForm($event)> <md-icon>search</md-icon> <md-tooltip>{{vm.showSearchForm ? \'Hide\' : \'Show\'}} Search</md-tooltip> </md-button> <form name=search class=search-form layout=row ng-style="{ width: vm.showSearchForm ? \'20rem\' : \'0\' }"> <input type=search name=query ng-model=searchQuery ng-change=vm.highlightNodes() flex> <button class=clear ng-click=vm.clearSearchForm()> <md-icon>clear</md-icon> <md-tooltip>Clear</md-tooltip> </button> </form> <md-button class=md-icon-button ng-click=vm.showHelp($event) aria-label=Help> <md-icon>help_outline</md-icon> <md-tooltip>Help</md-tooltip> </md-button> </div> </div> </md-toolbar> <md-sidenav md-component-id=right class=md-sidenav-right md-is-open=vm.activeNode md-disable-backdrop md-whiteframe=4 layout=column> <md-toolbar> <div class=md-toolbar-tools> <span flex></span> <md-button class=md-icon-button ng-click="vm.activeNode = null"> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <div flex layout=column layout-align="center center" ng-if=vm.sidebarLoading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-switch=vm.graphType ng-if="!vm.sidebarLoading && vm.nodeData" layout=column flex> <person-info ng-switch-when=people person=vm.nodeData related=vm.related activate="vm.activeNode = $node" layout=column flex></person-info> <work-info ng-switch-when=works work=vm.nodeData related=vm.related activate="vm.activeNode = $node" layout=column flex></work-info> </div> </md-sidenav> <main layout=column flex> <concept-browser flex ng-if=vm.graph ng-model=vm.graph active-node=vm.activeNode size-metric=vm.sizeMetric.strategy select-mode=vm.selectMode.strategy highlighted-nodes=vm.highlightedNodes reln-types=vm.relnTypeFilter> </concept-browser> <div ng-if="!vm.graph && vm.graphLoading" flex layout=column layout-align="center center" layout-padding> <md-progress-circular md-mode=indeterminate></md-progress-circular> <div class="text-center md-headline md-secondary"> Loading graph data&hellip;<br> This may take a while. </div> </div> </main> '),e.put("app/vwise/workspace.html",'<sda-header md-sidenav-id=left active-url=/research></sda-header> <main layout=row flex> <md-sidenav md-component-id=left class=md-sidenav-left layout=column md-is-locked-open=vm.sidebarFocused> <form layout=row flex=none> <md-input-container flex> <label for=searchQuery>Search</label> <md-icon>search</md-icon> <input type=search name=searchQuery id=searchQuery ng-model=vm.searchQuery ng-change=vm.search(vm.searchQuery) required md-sidenav-focus> </md-input-container> </form> <md-content flex> <div ng-if=vm.loading layout=row layout-align=center> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-if="!vm.loading && vm.peopleResults && vm.peopleResults.items.length == 0 && vm.worksResults && vm.worksResults.items.length == 0" layout=row layout-padding> <p>No results for "{{vm.searchQuery}}".</p> </div> <div ng-if="!vm.loading && vm.peopleResults && vm.peopleResults.items.length > 0"> <md-subheader>People</md-subheader> <md-list> <md-list-item ng-repeat="item in vm.peopleResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text ng-bind-html=item.label></div> </md-list-item> </md-list> </div> <div ng-if="!vm.loading && vm.worksResults && vm.worksResults.items.length > 0"> <md-subheader>Works</md-subheader> <md-list> <md-list-item ng-repeat="item in vm.worksResults.items" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text ng-bind-html=item.label></div> </md-list-item> </md-list> </div> </md-content> </md-sidenav> <vwise-workspace workspace=vm.workspace flex layout=column></vwise-workspace> </main> '),e.put("app/themes/reader.html",'<sda-header md-sidenav-id=left active-url=/themes></sda-header> <div class="page-banner shade" layout=row layout-align=center> <div class=container flex> <h1>SDA Themes</h1> </div> </div> <div layout=row layout-align=center flex> <main class=container layout=row flex> <md-sidenav md-component-id=left class=md-sidenav-left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <md-tabs md-stretch-tabs=always flex> <md-tab aria-label=Themes> <md-tab-label> <md-icon>explore</md-icon> <md-tooltip>Themes</md-tooltip> </md-tab-label> <md-tab-body> <div layout=column> <!--\n                <div layout="row" flex="none">\n                  <md-input-container flex>\n                    <label>Search articles</label>\n                    <md-icon>search</md-icon>\n                    <input type="search" ng-model="query" ng-model-options="{debounce: 500}" ng-change="vm.search(query)">\n                  </md-input-container>\n                </div>\n              --> <div class=collections flex> <tree-categorization scope-id=sda scheme=overviews active-ref-id=vm.articleId></tree-categorization> </div> </div> </md-tab-body> </md-tab> <md-tab aria-label="Book Reviews"> <md-tab-label> <md-icon>book</md-icon> <md-tooltip>Book Reviews</md-tooltip> </md-tab-label> <md-tab-body> Coming soon... </md-tab-body> </md-tab> <md-tab aria-label=Biographies> <md-tab-label> <md-icon>person</md-icon> <md-tooltip>Biographies</md-tooltip> </md-tab-label> <md-tab-body> Coming soon... </md-tab-body> </md-tab> <md-tab aria-label="Research Articles"> <md-tab-label> <md-icon>school</md-icon> <md-tooltip>Research Articles</md-tooltip> </md-tab-label> <md-tab-body> Coming soon... </md-tab-body> </md-tab> </md-tabs> </md-sidenav> <div layout=column flex ui-view> <div ng-if=vm.loading flex layout=row layout-align="center center"> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div ng-if="!vm.loading && vm.queryResult"> <h1>Search Results <small ng-if=vm.queryResult.query.q>"{{vm.queryResult.query.q}}"</small></h1> <p ng-if=vm.queryResult.query> Showing {{vm.queryResult.query.totalResults == 0 ? 0 : vm.queryResult.query.offset+1}}&ndash;{{vm.queryResult.query.offset + vm.queryResult.articles.length}} of {{vm.queryResult.query.totalResults}} </p> <nav class=pagination ng-if="vm.queryResult.query.numPages > 1"> <a href="" ng-click=vm.displayFirstPage() ng-if=vm.queryResult.query.first> <i class="fa fa-angle-double-left"></i> <span class=sr-only>First</span> </a> <a href="" ng-click=vm.displayPrevPage() ng-if=vm.queryResult.query.previous> <i class="fa fa-angle-left"></i> <span class=sr-only>Previous</span> </a> <span>{{vm.queryResult.query.pg}}</span> <a href="" ng-click=vm.displayNextPage() ng-if=vm.queryResult.query.next> <span class=sr-only>Next</span> <i class="fa fa-angle-right"></i> </a> <a href="" ng-click=vm.displayLastPage() ng-if=vm.queryResult.query.last> <span class=sr-only>Last</span> <i class="fa fa-angle-double-right"></i> </a> </nav> <ol ng-if=vm.queryResult.articles> <li class=result ng-repeat="result in vm.queryResult.articles"> <h3><a ui-sref="sda.reader.article({id: result.id})">{{result.title}}</a></h3> <span class=author ng-repeat="author in result.authors">{{author.name}}, {{author.affiliation}}</span> <p ng-bind-html=result.absHL></p> <p ng-bind-html=result.contentHL></p> </li> </ol> <div ng-if=!vm.queryResult.articles>No results</div> <nav class=pagination ng-if="vm.queryResult.query.numPages > 1"> <a href="" ng-click=vm.displayFirstPage() ng-if=vm.queryResult.query.first> <i class="fa fa-angle-double-left"></i> <span class=sr-only>First</span> </a> <a href="" ng-click=vm.displayPrevPage() ng-if=vm.queryResult.query.previous> <i class="fa fa-angle-left"></i> <span class=sr-only>Previous</span> </a> <span>{{vm.queryResult.query.pg}}</span> <a href="" ng-click=vm.displayNextPage() ng-if=vm.queryResult.query.next> <span class=sr-only>Next</span> <i class="fa fa-angle-right"></i> </a> <a href="" ng-click=vm.displayLastPage() ng-if=vm.queryResult.query.last> <span class=sr-only>Last</span> <i class="fa fa-angle-double-right"></i> </a> </nav> </div> <md-content layout=column flex ng-if=!vm.queryResult> <div layout=row layout-padding layout-margin flex> <section flex=66> <h1 class=md-display-1>SDA Reader</h1> <p> The SDA Reader contains articles that provide an encyclopedic survey of contemporary research issues in the field and provide critical reflection on select works and people documented in the historical collection. Following the genre of print-based introductory readers widely used within philosophy, theology and Humanities disciplines, the SDA reader provides a starting point those who want an introduction to specific topics and directions for further research. </p> <p>The SDA Reader contains four main categories of content.</p> <ul class=list-style-type:none;> <li><p><em>Thematic Overviews</em> provide a systematic survey of key concepts in the field of SDA. Each overview article introduces a key topic and provides references to both the primary source material and the research literature for those who wish to explore the issue in more depth.</p></li> <li><p><em>Research Articles</em> provide scholarly treatment of specific topics. These are of a length, quality, and scope associated with peer-reviewed journal articles and exceptional conference presentations.</p></li> <li><p><em>Book Reviews</em> offer a critical review of a book within the digital library. Reviews go beyond the summary information that accompanies each work to offer a critical assesment of the book\'s scholarly merit and impact as well as its relevance to contemporary research.</p></li> <li><p><em>Biographies</em> describe the professional and personal life of influential people documented in the digital library. These research articles serve to contextualize the books written by these individuals and assess their overall impact on the development of thought on this topic.</p></li> </ul> </section> <aside flex=33> <h2>Perspectives on SDA</h2> <ul style=list-style-type:none> <li><a href=/about/perspectives/philosophers>Philosophers</a></li> <li><a href=/about/perspectives/theologians>Theologians</a></li> <li><a href=/about/perspectives/scientists>Scientists</a></li> <li><a href=/about/perspectives/historians>Historians</a></li> <li><a href=/about/perspectives/psychologists>Psychologists</a></li> <li><a href=/about/perspectives/literary>Literary Scholars</a></li> <li><a href=/about/perspectives/scripture>Scripture Scholars</a></li> <li><a href=/about/perspectives/atheists>Atheists</a></li> <li><a href=/about/perspectives/ministers>Ministers</a></li> <li><a href=/about/perspectives/artists>Artists</a></li> <li><a href=/about/perspectives/teachers>Teachers</a></li> <li><a href=/about/perspectives/anyone>Anyone</a></li> </ul> <!--\n            <h2>Concept Map</h2>\n            <div class="cmap-container">\n              <a href=""><img src="//placehold.it/200x200" /></a>\n            </div>\n            --> </aside> </div> </md-content> </div> </main> </div> '),e.put("app/components/collapsible-summary/collapsible-summary.html",'<section class=summary ng-bind-html=$ctrl.content ng-class="{collapsed: ($ctrl.longEnough && !$ctrl.summaryExpanded)}" ng-click="$ctrl.summaryExpanded = true"></section> <div layout=row layout-align="center center" ng-if=$ctrl.longEnough> <md-button ng-click="$ctrl.summaryExpanded = !$ctrl.summaryExpanded" class=md-raised> Show {{$ctrl.summaryExpanded ? \'Less\' : \'More\'}} </md-button> </div> '),e.put("app/components/relationships/relationships.html",'<h2 ng-if="$ctrl.loading || !$ctrl.relns || $ctrl.relns.length > 0">Related Books</h2> <div layout=row layout-align="center center" ng-if=$ctrl.loading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <div layout=row layout-padding layout-align="center center" ng-if="!$ctrl.loading && !$ctrl.relns"> <div> <md-icon>warning</md-icon> </div> <div> Unable to load relationships. </div> </div> <div ng-if="!$ctrl.loading && $ctrl.relns.length > 0"> <div ng-repeat="group in $ctrl.relns"> <md-subheader class="md-no-sticky collapse-handle" ng-click="group.visible = !group.visible"> <md-icon>{{group.visible ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> {{group.label}} </md-subheader> <md-list class=slide ng-show=group.visible> <div ng-repeat="reln in group.relationships"> <md-list-item ng-repeat="anchor in reln.anchors" ui-sref="library.book({id: anchor.ref.id})" aria-label="{{anchor.label | stripTags}}"> <div class=md-list-item-text ng-bind-html=anchor.label></div> </md-list-item> </div> </md-list> </div> </div> '),e.put("app/components/work-authors/work-authors.html","<span class=author ng-repeat=\"author in $ctrl.authors\"> <a ui-sref=\"library.person({id: author.authorId})\">{{author.firstName}} {{author.lastName}}</a>{{$last ? '' : ',' }} </span> "),e.put("app/research/book/book.html",'<md-content class=md-content layout=row layout-padding layout-margin> <div flex=66> <h1 class="title md-display-1" layout=row> <work-title title=vm.title></work-title> <span flex></span> <read-online-link copies=vm.work.copies work-id=vm.work.id></read-online-link> </h1> <p class=by-line ng-if="vm.work.authors && vm.work.authors.length > 0"><span>by </span><work-authors authors=vm.work.authors></work-authors></p> <collapsible-summary ng-if=vm.work.summary content=vm.work.summary></collapsible-summary> <section class=editions ng-if="vm.work.editions && vm.work.editions.length > 0"> <h2 class=md-title>Editions</h2> <div class=edition ng-repeat="edition in vm.work.editions | orderBy:\'publicationInfo.date.calendar\'"> <h3 class=handle layout=row layout-align="start center" ng-click="edition.active = !edition.active"> <md-button class=md-icon-button aria-label="toggle details"> <md-icon>expand_{{edition.active ? \'less\' : \'more\'}}</md-icon> </md-button> <span>{{edition.editionName || \'[Untitled Edition]\'}}</span> <span flex></span> <read-online-link copies=edition.copies work-id=vm.work.id edition-id=edition.id></read-online-link> </h3> <div class=slide ng-show=edition.active> <work-citation authors=edition.authors title=edition.titles edition=edition.editionName pub-info=edition.publicationInfo></work-citation> <section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section> <section class=volumes ng-if="edition.volumes && edition.volumes.length > 0"> <h4 class=md-title>Volumes</h4> <div class=volume ng-repeat="volume in edition.volumes"> <h5 class=handle ng-click="volume.active = !volume.active" layout=row layout-align="start center"> <md-button class=md-icon-button> <md-icon>expand_{{volume.active ? \'less\': \'more\'}}</md-icon> </md-button> <span>Volume {{volume.volumeNumber}}</span> <span flex></span> <read-online-link copies=volume.copies work-id=vm.work.id edition-id=edition.id volume-id=volume.id></read-online-link> </h5> <div class=slide ng-show=volume.active> <work-citation authors=volume.authors title=volume.titles edition=edition.editionName volume=volume.volumeNumber pub-info=volume.publicationInfo></work-citation> <section class=summary ng-if=edition.summary ng-bind-html=edition.summary></section> </div> </div> </section> </div> </div> </section> </div> <div layout=column layout-padding flex=33> <relationships token=vm.work.ref.token></relationships> <see-also show-heading=true token=vm.work.ref.token></see-also> <div ng-if="!(vm.refs.bibliography | empty)"> <h2>Bibliography</h2> <bibliography refs=vm.refs style-id=chicago></bibliography> </div> </div> </md-content> '),e.put("app/research/person/person.html",'<md-content layout=row layout-padding layout-margin flex=noshrink> <div flex=66> <h1 class=md-display-1>{{vm.person.name.label}}</h1> <collapsible-summary ng-if=vm.person.summary content=vm.person.summary></collapsible-summary> <section class=bibliography ng-if="!(vm.refs.bibliography | empty)"> <h2>Bibliography</h2> <bibliography refs=vm.refs style-id=chicago></bibliography> </section></div>  <aside layout=column layout-padding flex=33> <div ng-if="(vm.person.name | personName) != vm.person.name.label" layout=row> <strong flex=20>Name</strong> <person-name name=vm.person.name></person-name> </div> <div ng-if="vm.person.altNames.length > 0" layout=row> <strong flex=20>a.k.a.</strong> <ul class=alt-names layout=column> <li ng-repeat="name in vm.person.altNames"> <span class=display ng-if=name.label>{{name.label}}</span> <person-name name=name ng-if=!name.label></person-name> </li> </ul> </div> <div ng-if=vm.person.birth layout=row> <strong flex=20>Born</strong> <date-location event=vm.person.birth layout=column></date-location> </div> <div ng-if=vm.person.death layout=row> <strong flex=20>Died</strong> <date-location event=vm.person.death layout=column></date-location> </div> <div ng-if="vm.relatedWorks && vm.relatedWorks.length > 0"> <h2 class=list-heading>Books</h2> <md-list> <md-list-item ui-sref="^.book({id: work.id})" ng-repeat="work in vm.relatedWorks | orderBy: \'pubYear\'"> <p class=work-result-label><span class=title>{{work.title}}</span> <span ng-if=work.pubYear>({{work.pubYear}})</span></p> </md-list-item> </md-list> </div> <see-also show-heading=true token=vm.person.ref.token></see-also> </aside> </md-content> '),e.put("app/influence-map/help/help.html",'<md-dialog> <md-toolbar> <div class=md-toolbar-tools> <h2>Help</h2> <span flex></span> <md-button class=md-icon-button ng-click=close()> <md-icon>close</md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class=md-dialog-content layout=column layout-align="center center"> <iframe width=1280 height=720 src=https://www.youtube.com/embed/0PzUCCnlN18 frameborder=0 allowfullscreen></iframe> </div> </md-dialog-content> </md-dialog> '),e.put("app/themes/article/article.html",'<sda-header md-sidenav-id=left active-url=/themes></sda-header> <div layout=row layout-align=center flex class=article-display> <main class=container layout=row flex> <md-sidenav md-component-id=left class=md-sidenav-left md-is-locked-open="$mdMedia(\'gt-sm\')" layout=column> <md-tabs md-selected=vm.activeTab flex> <md-tab aria-label=Contents> <md-tab-label> <md-icon>toc</md-icon> <md-tooltip>Contents</md-tooltip> </md-tab-label> <md-tab-body> <div class=toc> <ol du-spy-context> <li ng-repeat="node in vm.toc.children" ng-include="\'toc-tree-item.html\'" ng-init="parent = vm.toc" du-scrollspy={{node.id}} du-scroll-container=article-content></li> </ol> <script type=text/ng-template id=toc-tree-item.html> <a ng-href="#{{node.id}}" du-smooth-scroll du-scrollspy>{{node.text}}</a>\n                <ol ng-if="node.children.length > 0">\n                  <li ng-repeat="node in node.children"\n                      ng-include="\'toc-tree-item.html\'"\n                      ng-init="parent = $parent.$parent.node"\n                      du-scrollspy="{{node.id}}"\n                      du-scroll-container="article-content"></li>\n                </ol> </script> </div> </md-tab-body> </md-tab> <md-tab aria-label=Links> <md-tab-label> <md-icon>link</md-icon> <md-tooltip>Links</md-tooltip> </md-tab-label> <md-tab-body> <see-also token=vm.article.ref.token></see-also> </md-tab-body> </md-tab> <md-tab aria-label=Footnotes> <md-tab-label> <md-icon>note</md-icon> <md-tooltip>Footnotes</md-tooltip> </md-tab-label> <md-tab-body> <div class=notes> <ol du-spy-context> <li ng-repeat="note in vm.orderedFootnotes track by note.id" ng-class="{active: note.active}" du-scrollspy={{note.backlinkId}} du-scroll-container=article-content> <a ui-sref="article({id: vm.article.id, scrollTo: note.backlinkId})" ng-click="vm.activateNote(note, $event)" ng-model=note.content mathjax></a> </li> </ol> </div> </md-tab-body> </md-tab> <md-tab aria-label=Bibliography> <md-tab-label> <md-icon>school</md-icon> <md-tooltip>Bibliography</md-tooltip> </md-tab-label> <md-tab-body> <div class=refs> <ol class=bibliography> <li ng-repeat="item in vm.bibliography.items" ng-bind-html=item></li> </ol> </div> </md-tab-body> </md-tab> </md-tabs> </md-sidenav> <md-content flex layout=row id=article-content> <article layout=column flex layout-padding layout-margin> <div class=article-meta> <h1 class=article-title>{{vm.article.title}}</h1> <p class=author-info ng-if="vm.article.authors && vm.article.authors.length > 0"> by <span ng-repeat="author in vm.article.authors"> <article-author author=author></article-author>{{ $last ? \'\' : \'; \' }} </span> </p> </div> <article-parser body=vm.article.body generate-toc="vm.toc = toc" footnotes=vm.article.footnotes citations=vm.citations></article-parser> </article> </md-content> </main> </div> '),e.put("app/themes/preview/preview.html",'<md-content layout=column layout-gt-md=row flex class=article-preview> <div layout=row layout-align=space-between layout-gt-md=column layout-align-gt-md=start flex=none flex-gt-md=33 flex-order-gt-md=2 layout-margin layout-padding> <div> <h1 class="article-title md-display-1">{{vm.article.title}}</h1> <p class=author-info ng-if="vm.article.authors && vm.article.authors.length > 0"> by <span ng-repeat="author in vm.article.authors"> <article-author author=author></article-author>{{ $last ? \'\' : \'; \' }} </span> </p> </div> <div> <md-button class="md-accent md-raised" ui-sref="article({id: vm.article.id})"> Read Full Article </md-button> </div> </div> <div layout-gt-md=column flex-gt-md=66 flex-order-gt-md=1 layout-margin layout-padding> <section class=abstract ng-if=vm.article.abstract layout=row layout-align=center flex=none> <div ng-bind-html=vm.article.abstract></div> </section> <div layout=row layout-align=end flex=none hide-gt-md> <md-button class="md-accent md-raised" ui-sref="article({id: vm.article.id})"> Read Full Article </md-button> </div> </div> </md-content> '),e.put("app/research/components/date-location/date-location.html","<time class=date ng-if=$ctrl.event.date datetime={{$ctrl.event.date.calendar}}>{{$ctrl.event.date.description}}</time> <span class=location ng-if=$ctrl.event.location>{{$ctrl.event.location}}</span> <div ng-if=$ctrl.event.description ng-bind-html=$ctrl.event.description></div> "),e.put("app/research/components/read-online-link/read-online-link.html",'<md-button class=md-icon-button aria-label="read online" ng-if="$ctrl.copies.length == 1" ui-sref="book-reader({workId: $ctrl.workId, copyId: $ctrl.copies[0].id, editionId: $ctrl.editionId, volumeId: $ctrl.volumeId})"> <md-icon>book</md-icon> <md-tooltip>Read Online</md-tooltip> </md-button> <md-menu ng-if="$ctrl.copies.length > 1"> <md-button class=md-icon-button aria-label="read online" ng-click=$mdOpenMenu($event)> <md-icon>book</md-icon> <md-tooltip>Read Online</md-tooltip> </md-button> <md-menu-content> <md-menu-item ng-repeat="book in $ctrl.copies"> <md-button ui-sref="book-reader({workId: $ctrl.workId, copyId: book.id, editionId: $ctrl.editionId, volumeId: $ctrl.volumeId})"> <md-icon>book</md-icon> {{book.title}} </md-button> </md-menu-item> </md-menu-content> </md-menu> '),e.put("app/research/components/person-name/person-name.html","<span class=prefix ng-if=$ctrl.name.title>{{$ctrl.name.title}}</span> <span class=first ng-if=$ctrl.name.givenName>{{$ctrl.name.givenName}}</span> <span class=middle ng-if=$ctrl.name.middleName>{{$ctrl.name.middleName}}</span> <span class=last ng-if=$ctrl.name.familyName>{{$ctrl.name.familyName}}</span> <span class=suffix ng-if=$ctrl.name.suffix>{{$ctrl.name.suffix}}</span> "),
e.put("app/influence-map/components/person-info/person-info.html",'<div layout=column layout-margin> <div> <h2 class=name> <span class=given>{{$ctrl.person.name.givenName}}</span> <span class=family>{{$ctrl.person.name.familyName}}</span> </h2> </div> </div> <md-tabs flex> <md-tab> <md-tab-label> <md-icon>person</md-icon> </md-tab-label> <md-tab-body> <div layout=column layout-padding flex> <div class=summary ng-if=$ctrl.person.summary ng-bind-html=$ctrl.person.summary flex></div> <div class=summary ng-if=!$ctrl.person.summary flex>Summary not available</div> </div> </md-tab-body> </md-tab> <md-tab ng-if="$ctrl.works.length > 0"> <md-tab-label> <md-icon>content_copy</md-icon> </md-tab-label> <md-tab-body> <div layout-padding layout=column> <h4 class=list-heading>Books ({{$ctrl.works.length}})</h4> </div> <md-list> <md-list-item ng-repeat="work in $ctrl.works" ui-sref="library.book({id: work.id})"> <p class=work-result-label> <span class=title>{{work.title}}</span> <span ng-if=work.pubYear>({{work.pubYear}})</span> </p> </md-list-item> </md-list> </md-tab-body> </md-tab> <md-tab ng-if="$ctrl.related.length > 0"> <md-tab-label> <md-icon>link</md-icon> </md-tab-label> <md-tab-body> <related-nodes related=$ctrl.related activate="$ctrl.activate({$node: $node})"></related-nodes> </md-tab-body> </md-tab> </md-tabs> '),e.put("app/influence-map/components/related-nodes/related-nodes.html",'<md-list> <div ng-repeat="group in $ctrl.related"> <div ng-if="group.directed && group.out.nodes.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="group.out.expanded = !group.out.expanded"> <md-icon>{{group.out.expanded ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> {{group.out.label}} </md-subheader> <div class=slide ng-show=group.out.expanded> <md-list-item ng-repeat="node in group.out.nodes track by node.id" ng-click="$ctrl.activate({$node: node})"> <p class=work-result-label>{{node.label}}</p> </md-list-item> </div> </div> <div ng-if="group.directed && group.in.nodes.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="group.in.expanded = !group.in.expanded"> <md-icon>{{group.in.expanded ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> {{group.in.label}} </md-subheader> <div class=slide ng-show=group.in.expanded> <md-list-item ng-repeat="node in group.in.nodes track by node.id" ng-click="$ctrl.activate({$node: node})"> <p class=work-result-label>{{node.label}}</p> </md-list-item> </div> </div> <div ng-if="!group.directed && group.none.nodes.length > 0"> <md-subheader class="md-no-sticky collapse-handle" ng-click="group.none.expanded = !group.none.expanded"> <md-icon>{{group.none.expanded ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> {{group.none.label}} </md-subheader> <div class=slide ng-show=group.none.expanded> <md-list-item ng-repeat="node in group.none.nodes track by node.id" ng-click="$ctrl.activate({$node: node})"> <p class=work-result-label>{{node.label}}</p> </md-list-item> </div> </div> </div> </md-list> '),e.put("app/influence-map/components/work-info/work-info.html",'<div layout=column layout-padding flex> <div> <h1 class="md-title title"> <work-title title=$ctrl.work.titles></work-title> </h1> <p class=by-line>by <work-authors authors=$ctrl.work.authors></work-authors></p> </div> <collapsible-summary ng-if=$ctrl.work.summary content=$ctrl.work.summary></collapsible-summary> <div flex></div> <div ng-if="$ctrl.related.length > 0"> <h2>Related Books</h2> <related-nodes related=$ctrl.related activate="$ctrl.activate({$node: $node})"></related-nodes> </div> </div> '),e.put("app/vwise/components/panel/panel.html",'<div class=panel ng-class="{ resizing: vm.resizing }" ng-style="{ left: vp.xPosition, top: vp.yPosition, zIndex: vp.zPosition, width: vp.width, height: vp.height }" jqyoui-draggable="{ onDrag: \'vm.movePanel()\', onStop: \'vm.stopMove()\' }" ng-click=vm.activatePanel($event) data-jqyoui-options="{ handle: \'.drag-handle\' }" data-drag=true layout=column> <div class="panel-control drag-handle" layout=column layout-align="center center"> <md-icon>open_with</md-icon> </div> <button class="panel-control close" ng-click=vm.closePanel($event) layout=column layout-align="center center"> <md-icon>close</md-icon> </button> <div class="panel-control resize-handle" ng-style="{ left: vp.width, top: vp.height }" jqyoui-draggable="{ onStart: \'vm.startResize()\', onDrag: \'vm.resizePanel()\', onStop:\'vm.stopResize()\'}" data-drag=true layout=column layout-align="center center"> <md-icon>crop</md-icon> </div> <div class="panel-control panel-area panel-area-top" layout=row layout-align="end center"> <button ng-repeat="button in vm.actionButtons" ng-click=button.handler($event) title={{button.label}} layout=column layout-align="center center"> <md-icon ng-if=button.icon>{{button.icon}}</md-icon> <span ng-if=!button.icon>{{button.label}}</span> </button> </div> <div class="panel-control panel-area panel-area-right" layout=column layout-align="start center"> <button ng-repeat="button in vm.propertyButtons" ng-click=button.handler($event) title={{button.label}} layout=column layout-align="center center"> <md-icon ng-if=button.icon>{{button.icon}}</md-icon> <span ng-if=!button.icon>{{button.label}}</span> </button> </div> <div class="panel-control panel-area panel-area-bottom"></div> <div class="panel-control panel-area panel-area-left"></div> <div class=content flex layout=column></div> </div> '),e.put("app/vwise/components/person-panel/person-panel.html",'<div class=panel-person flex layout=column> <h1> <span class="panel-label name">{{name}}</span> </h1> <md-tabs flex> <md-tab ng-if=person.summary> <md-tab-label> <md-icon>subject</md-icon> </md-tab-label> <md-tab-body> <div class=summary ng-bind-html=person.summary></div> </md-tab-body> </md-tab> <md-tab ng-if="panel.works && panel.works.length > 0"> <md-tab-label> <md-icon>content_copy</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in panel.works" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text ng-bind-html=item.label></div> </md-list-item> </md-list> </md-tab-body> </md-tab> <md-tab ng-if="panel.relatedPeople && panel.relatedPeople.length > 0"> <md-tab-label> <md-icon>link</md-icon> </md-tab-label> <md-tab-body> <div ng-repeat="group in panel.relatedPeople"> <h3>{{group.label}}</h3> <md-list> <md-list-item ng-repeat="item in group.relationships" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> {{item.name.label}} </div> </md-list-item> </md-list></div>  </md-tab-body></md-tab></md-tabs></div> '),e.put("app/vwise/components/workspace/workspace.html",'<div flex jqyoui-droppable="{stack: true, onDrop:\'vm.thingDropped()\'}" data-drop=true class=workspace ng-click=vm.workspaceClicked($event)> <vwise-panel ng-repeat="panel in workspace.panels track by panel.id" panel=panel></vwise-panel> </div> '),e.put("app/vwise/components/work-panel/edition-panel.html",'<div class=panel-edition flex layout=column> <h1> <span class=panel-label> <span class=authors> <span class=author ng-repeat="author in edition.authors"> {{author.lastName}}. </span> </span> <span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span> </span> </h1> <md-tabs flex> <md-tab ng-if=edition.summary> <md-tab-label> <md-icon>subject</md-icon> </md-tab-label> <md-tab-body> <div class=summary ng-bind-html=edition.summary></div> </md-tab-body> </md-tab> <md-tab ng-if="edition.volumes.length > 0"> <md-tab-label> <md-icon>content_copy</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in edition.volumes" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> Volume {{item.volumeNumber}} ({{item.publicationInfo.date.description}}) </div> </md-list-item> </md-list> </md-tab-body> </md-tab> <md-tab ng-if="edition.copies.length > 0"> <md-tab-label> <md-icon>book</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in edition.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> {{item.title}} </div> </md-list-item> </md-list> </md-tab-body> </md-tab> </md-tabs> </div> '),e.put("app/vwise/components/work-panel/volume-panel.html",'<div class=panel-volume flex layout=column> <h1> <span class=authors> <span class=author ng-repeat="author in volume.authors"> {{author.lastName}}. </span> </span> <span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> <span class=edition-name>{{edition.editionName}}.</span> <span class=volume-name>Volume {{volume.volumeNumber}}.</span> </h1> <md-tabs flex> <md-tab ng-if=volume.summary> <md-tab-label> <md-icon>subject</md-icon> </md-tab-label> <md-tab-body> <div class=summary ng-bind-html=volume.summary></div> </md-tab-body> </md-tab> <md-tab ng-if="volume.copies.length > 0"> <md-tab-label> <md-icon>book</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in volume.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> {{item.title}} </div> </md-list-item> </md-list> </md-tab-body> </md-tab> </md-tabs> </div> '),e.put("app/vwise/components/work-panel/work-panel.html",'<div class=panel-work flex layout=column> <h1> <span class=panel-label> <span class=authors> <span class=author ng-repeat="author in work.authors"> {{author.lastName}}. </span> </span> <span class=title>{{title.title}}<span ng-if=title.subtitle>: {{title.subtitle}}</span>.</span> </span> </h1> <md-tabs flex> <md-tab ng-if=work.summary> <md-tab-label> <md-icon>subject</md-icon> </md-tab-label> <md-tab-body> <div class=summary ng-bind-html=work.summary></div> </md-tab-body> </md-tab> <md-tab> <md-tab-label> <md-icon>link</md-icon> </md-tab-label> <md-tab-body> <div ng-repeat="group in relationships"> <h3 style="margin-bottom: 0">{{group.label}}</h3> <md-list> <div ng-repeat="relationship in group.relationships"> <md-list-item ng-repeat="item in relationship.anchors" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text ng-bind-html=item.label></div> </md-list-item> </div> </md-list> </div> </md-tab-body> </md-tab> <md-tab ng-if="work.editions.length > 0"> <md-tab-label> <md-icon>content_copy</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in work.editions | orderBy:\'publicationInfo.date.calendar\'" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> {{item.editionName}} ({{item.publicationInfo.date.description}}) </div> </md-list-item> </md-list> </md-tab-body> </md-tab> <md-tab ng-if="work.copies.length > 0"> <md-tab-label> <md-icon>book</md-icon> </md-tab-label> <md-tab-body> <md-list> <md-list-item ng-repeat="item in work.copies" jqyoui-draggable={animate:false} data-jqyoui-options="{revert:\'invalid\',helper:\'clone\',appendTo:\'body\'}" data-drag=true> <div class=md-list-item-text> {{item.title}} </div> </md-list-item> </md-list> </md-tab-body> </md-tab> </md-tabs> </div> '),e.put("app/themes/components/tree-categorization/tree-categorization-item.html",'<md-icon ng-if="node.children.length === 0"></md-icon> <md-icon ng-click="node.expanded = !node.expanded" ng-if="node.children.length > 0">{{node.expanded ? \'expand_more\' : \'keyboard_arrow_right\'}}</md-icon> <span ng-if=!node.entryRef>{{ node.label }}</span> <a ui-sref="reader.preview({id: node.entryRef.id})" ng-if=node.entryRef>{{ node.label }}</a> <ol ng-if="node.children.length > 0" class=slide ng-show=node.expanded> <li ng-repeat="node in node.children" ng-include="\'app/themes/components/tree-categorization/tree-categorization-item.html\'" ng-init="parent = $parent.$parent.node"></li> </ol> '),e.put("app/themes/components/tree-categorization/tree-categorization.html",'<ol> <li ng-repeat="node in vm.categories.root.children" ng-include="\'app/themes/components/tree-categorization/tree-categorization-item.html\'" ng-init="parent = vm.categories.root"></li> </ol> ')}]);