<section class="work section--work" ng-if="vm.work">
   <h1><sda-work-title ng-model="vm.work.titles"></sda-work-title></h1>
   <p>by <sda-work-authors class="authors" ng-model="vm.work.authors"></sda-work-authors></p>

   <a class="volume-copy readonline" ui-sref="sda.library-bookreader({workId: vm.work.id, copyId: vm.work.copyRef.copyId})" ng-if="vm.work.CopyRef">
      <i class="fa fa-book"></i>
      <span class="sr-only">Read Volume {{volume.volumeNumber}} Online</span>
   </a>

   <div class="summary">
      <div class="content" ng-bind-html="vm.work.summary"></div>
   </div>

   <div class="editions" ng-if="vm.work.editions.length">
      <h2>Editions</h2>
      <section class="edition" ng-repeat="edition in vm.work.editions">
         <h3>{{edition.editionName}}</h3>

         <p>
            <sda-work-authors class="authors" ng-model="edition.authors"></sda-work-authors>
            <sda-work-title class="title" ng-model="edition.titles"></sda-work-title>
            <span class="pubinfo" ng-if="edition.publicationInfo.place || edition.publicationInfo.publisher || edition.publicationInfo.date.description">
               (<span class="place" ng-if="edition.publicationInfo.place">{{edition.publicationInfo.place}},</span>
               <span class="publisher" ng-if="edition.publicationInfo.publisher">{{edition.publicationInfo.publisher}}.</span>
               <time class="date" ng-if="edition.publicationInfo.date.description" datetime="{{edition.publicationInfo.date.calendar}}">{{edition.publicationInfo.date.description}}</time>)
            </span>
         </p>

         <a class="volume-copy readonline" ui-sref="sda.library-bookreader({workId: vm.work.id, copyId: edition.copyRef.id})" ng-if="edition.copyRef">
            <i class="fa fa-book"></i>
            <span class="sr-only">Read Volume {{volume.volumeNumber}} Online</span>
         </a>

         <div class="summary" ng-if="edition.summary">
            <h4>Summary</h4>
            <div class="content" ng-bind-html="edition.summary"></div>
         </div>

         <div class="volumes" ng-if="edition.volumes.length">
            <h4>Volumes</h4>
            <section class="volume" ng-repeat="volume in edition.volumes">
               <p>
                  <sda-work-authors class="authors" ng-model="edition.authors"></sda-work-authors>
                  <sda-work-title class="title" ng-model="edition.titles"></sda-work-title>
                  <span class="volume">Volume {{volume.volumeNumber}}</span>
                  <span class="pubinfo" ng-if="edition.publicationInfo.place || edition.publicationInfo.publisher || edition.publicationInfo.date.description">
                     (<span class="place" ng-if="edition.publicationInfo.place">{{edition.publicationInfo.place}},</span>
                     <span class="publisher" ng-if="edition.publicationInfo.publisher">{{edition.publicationInfo.publisher}}.</span>
                     <time class="date" ng-if="edition.publicationInfo.date.description" datetime="{{edition.publicationInfo.date.calendar}}">{{edition.publicationInfo.date.description}}</time>)
                  </span>
               </p>

               <a class="volume-copy readonline" ui-sref="sda.library-bookreader({workId: vm.work.id, copyId: volume.copyRef.id})" ng-if="volume.copyRef">
                  <i class="fa fa-book"></i>
                  <span class="sr-only">Read Volume {{volume.volumeNumber}} Online</span>
               </a>

               <div class="summary" ng-if="volume.summary">
                  <h5>Summary</h5>
                  <div class="content" ng-bind-html="volume.summary"></div>
               </div>
            </section>
         </div>
      </section>
   </div>

   <div class="related" ng-if="vm.relationships.length">
      <h2>Related Works</h2>
      <ul>
         <li ng-repeat="relationship in vm.relationships">
            <!-- HACK: relies on the fact that works, editions, and volumes look similar -->
            <span class="relationship">{{relationship.title}}</span>
            <sda-work-authors class="authors" ng-model="relationship.entity.authors"></sda-work-authors>
            <span class="title"><a ui-sref="sda.library.book({workId: relationship.entity.id})"><sda-work-title ng-model="relationship.entity.titles"></sda-work-title></a></span>
            <span class="edition" ng-if="relationship.edition">{{relationship.edition.editionName}}</span>
            <span class="volume" ng-if="relationship.volume">{{relationship.volume.volumeNumber}}</span>
            <span class="pubinfo" ng-if="relationship.entity.publicationInfo.place || relationship.entity.publicationInfo.publisher || relationship.entity.publicationInfo.date.description">
               (<span class="place" ng-if="relationship.entity.publicationInfo.place">{{relationship.entity.publicationInfo.place}},</span>
               <span class="publisher" ng-if="relationship.entity.publicationInfo.publisher">{{relationship.entity.publicationInfo.publisher}}.</span>
               <time class="date" ng-if="relationship.entity.publicationInfo.date.description" datetime="{{relationship.entity.publicationInfo.date.calendar}}">{{relationship.entity.publicationInfo.date.description}}</time>)
            </span>
         </li>
      </ul>
   </div>
</section>
